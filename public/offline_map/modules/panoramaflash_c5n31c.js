/**/_jsload2&&_jsload2('panoramaflash', 'x.extend(Oa.prototype,{Ui:function(){for(var a=0;a<z.Dr.length;a++)z.Dr[a](this);this.Nf!=p&&this.dispatchEvent(new M("onvisible_poi_type_changed"),{visiblePOIType:this.Nf});this.kl=this.ih();this.Rr=this.hd=q;this.Mq={};this.gd=new lk(this);this.NS();this.vQ();this.xQ();if(this.Ya||this.Kb)this.Ya?this.rc(this.Ya,this.Le):this.ta(this.Kb)},xQ:function(){var a=this;setInterval(function(){if(a.Yb()){var b=a.ih();b.ab(a.kl)||(a.gd.set("size",{width:b.width,height:b.height}),a.kl=b,a.dispatchEvent(new M("size_changed")))}}, 80)},NS:function(){var a=this.gd,b=this;a.addEventListener("clicked_position",function(a){b.dispatchEvent(new M("onclicked_position"),a)});a.addEventListener("thumbnail_complete",function(){b.dispatchEvent(new M("onthumbnail_complete"))});a.addEventListener("indoor_enter",function(a){a.data.a4===p?b.Rk({haveBreakId:q}):b.Rk({haveBreakId:o});b.dispatchEvent(new M("onhaveBreakId_changed"))});a.addEventListener("first_thumb_complete",function(){var a,d;if(b.hd!==o){b.hd=o;a=this;b.Ya=a.get("id");"street"!= b.Le&&(b.Le="street",b.Py("inter"));b.io=a.get("links");d=a.get("position");b.Kb=d;d=a.get("pov");!b.Ea.heading&&!b.Ea.pitch?b.Ea=d:(d.heading!=b.Ea.heading||d.pitch!=b.Ea.pitch)&&a.set("pov",b.Ea);d=a.get("zoom");1==!b.Kc&&1!=d?b.Kc==d:b.Kc!=d&&a.set("zoom",b.Kc);d=p;for(var e in b.Ke)d=b.Ke[e],delete b.Ke[e],b.Ja(d);b.k.navigationControl===q&&a.set("navigationControlVisible",q);var f=function(b){a.Is("toggleUI",{topo:b.linksControl,wellLid:b.clickOnRoad,innerExit:q,innerFloor:b.indoorFloorControl})}; f(b.k);b.addEventListener("clickonroad_changed",function(){f(b.k)});b.addEventListener("links_visible_changed",function(){f(b.k)});b.addEventListener("onindoorfloor_options_changed",function(){f(b.k)});b.addEventListener("navigation_visible_changed",function(){a.set("navigationControlVisible",b.k.navigationControl)});if(0<b.Tg.length){e=0;for(d=b.Tg.length;e<d;e++)b.Tg[e].register(b.C,b,b.gd);var g="",i=[];e=0;for(d=b.Gr.length;e<d;e++)g=b.Gr[e].cN,i=b.Gr[e].bN,b[g].apply(b,i)}b.k.visible?b.show(): b.U()}});a.addEventListener("pano_error",function(){b.dispatchEvent(new M("error"))});a.addEventListener("id_changed",function(a){if(b.hd||b.Ya==p||"inter"==b.Le)b.Ya=a.data;b.dispatchEvent(new M("onid_changed"))});a.addEventListener("position_changed",function(a){b.hd?b.Kb=b.gd.get("position"):b.Kb==p&&(b.Kb=a.data);b.dispatchEvent(new M("onposition_changed"))});a.addEventListener("pov_changed",function(a){if(b.hd||b.Ea.heading==p)b.Ea=a.data;b.dispatchEvent(new M("onpov_changed"))});a.addEventListener("links_changed", function(a){if(b.hd||0==b.io.length)b.io=a.data;b.dispatchEvent(new M("onlinks_changed"))});a.addEventListener("zoom_changed",function(a){if(b.hd||b.Kc==p)b.Kc=a.data;b.dispatchEvent(new M("onzoom_changed"))});a.addEventListener("sdata_loaded",function(a){b.Py(a.data.panoType);b.dispatchEvent(new M("oncopyright_changed"),{copyright:a.data.copyright});if(b.Rr){for(var d in b.Mq)b[d](b.Mq[d]);b.Rr=q;b.Mq={}}});a.addEventListener("overlay_mouseclick",function(a){a=b.Ke[a.data.markerId];a.dispatchEvent(new M("onclick"), {type:"click",target:a})});a.addEventListener("overlay_mouseover",function(a){a=b.Ke[a.data.markerId];a.dispatchEvent(new M("onmouseover"),{type:"mouseover",target:a})});a.addEventListener("overlay_mouseout",function(a){a=b.Ke[a.data.markerId];a.dispatchEvent(new M("onmouseout"),{type:"mouseout",target:a})})},vQ:function(){var a=this;x.M(this.C,ja.da.Te?"DOMMouseScroll":"onmousewheel",function(b){if(a.k.enableScrollWheelZoom&&a.k.visible){var c=-b.detail/3||b.wheelDelta/120,c=a.ga()+c;a.Oc(c);Cb(b)}})}, rc:function(a,b,c){"object"===typeof b&&(c=b,b=j);if(!this.hd||a&&a!=this.Ya)this.hd||(this.Ya=a,this.Le=b||"street",this.Kb=p),this.gd.set("id",{id:a,type:b||"street"}),this.Rr=o,c&&c.pov&&this.Nc(c.pov)},ta:function(a){if(!this.hd||a&&!this.Kb.ab(a))this.hd||(this.Kb=a,this.Ya=p),this.gd.set("position",a),this.Rr=o},Nc:function(a){a&&(90<a.pitch&&(a.pitch=90),-90>a.pitch&&(a.pitch=-90),this.hd?this.Rr?this.Mq.setPov=a:this.gd.set("pov",a):this.Ea=a)},Oc:function(a){a!=this.Kc&&(a>we&&(a=we),a<xe&& (a=xe),this.hd?this.gd.set("zoom",a):this.Kc=a,this.Mq.setZoom=a)},show:function(){this.k.visible=o;this.Af&&(this.D&&this.D.Ka()===this.C)&&x.K.show(this.Af);this.gd&&this.gd.Cr&&(this.gd.Cr.style.left="0");this.hd&&(this.xl===this.Yb()&&this.gd.set("id",{id:this.xl,type:this.bT||"street"}),this.dispatchEvent(new M("onvisible_changed")))},U:function(){this.k.visible=q;this.hd&&(this.xl=this.Ya,this.bT=this.Le,this.gd.Is("closePano"));this.Ya=p;this.gd&&this.gd.Cr&&(this.gd.Cr.style.left="-9999px"); this.dispatchEvent(new M("onvisible_changed"))},cC:function(a){function b(a,b){return function(){a.Gr.push({cN:b,bN:arguments})}}if(this.hd)a.register(this.C,this,this.gd);else for(var c=a.getPanoMethodList(),d="",e=0,f=c.length;e<f;e++)d=c[e],this[d]=b(this,d);this.Tg.push(a)},qF:function(a){this.hd&&a.dispose();for(var b=this.Tg.length;b--;)this.Tg[b]===a&&this.Tg.splice(b,1)},du:function(a){this.Nf=a||"none";this.dispatchEvent(new M("onvisible_poi_type_changed"),{visiblePOIType:this.Nf})},Ja:function(a){this.Ke[a.jd]= a;this.hd&&this.dispatchEvent(new M("onadd_overlay"),{overlay:a})},Ub:function(a){var b=a.jd;this.hd&&this.dispatchEvent(new M("onremove_overlay"),{overlay:a});delete this.Ke[b]},Zo:function(){var a=this.gd.get("indoorData");a&&a.pid&&this.rc(a.pid)},GF:function(a){this.gd.set("interactiveState",a)}});xj=Oa.prototype; U(xj,{setId:xj.rc,setPosition:xj.ta,setPov:xj.Nc,setZoom:xj.Oc,show:xj.show,hide:xj.U,addPlugin:xj.cC,removePlugin:xj.qF,addOverlay:xj.Ja,removeOverlay:xj.Ub,setPanoramaPOIType:xj.du,exitInter:xj.Zo,setInteractiveState:xj.GF});function mk(){this.yT=(this.EA=window.ActiveXObject&&!(window.opera&&!window.opera.nodeType))?\' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"\':\' type="application/x-shockwave-flash"\';this.HI=["id","width","height","align","data"];this.II="wmode movie flashvars scale quality play loop menu salign bgcolor base allowscriptaccess allownetworking allowfullscreen seamlesstabbing devicefont swliveconnect".split(" ")} x.extend(mk.prototype,{create:function(a,b){var c=this.UR(a);b&&"string"===typeof b&&(b=document.getElementById(b));b?b.innerHTML=c:document.write(c)},remove:function(a){if((a=this.VL(a))&&this.EA){a.style.display="none";for(var b in a)"function"===typeof a[b]&&(a[b]=p);window.uP&&setTimeout(window.uP,0)}a.parentNode.removeChild(a)},tX:function(){function a(){var c=function(){var a=navigator;if(a.plugins&&a.mimeTypes.length){if((a=a.plugins["Shockwave Flash"])&&a.description)return a.description.replace(/([a-zA-Z]|\\s)+/, "").replace(/(\\s)+r/,".")+".0"}else if(b.EA)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,".")}catch(f){}}();a=function(){return c};return c}var b=this;return a()},VL:function(a){return document.getElementById(a)},pH:function(a,b){for(var a=a.split("."),b=b.split("."),c=Math.max(a.length,b.length),d=0;d<c;d++){var e=a[d],f=b[d];if(!e||!f)return!e&&!f?0:e?1:-1;e=Number(e);f=Number(f);if(e<f)return-1;if(e>f)return 1}return 0}, UR:function(a){a=a||{};a.movie=a.url||"";a.altHtml=a.errorMessage||"";if(a.vars){var b=a.vars,c=[],d=p,e=p;for(d in b)e=b[d],c.push(d+"="+encodeURIComponent(e));a.flashvars=c.join("&")}a.minVer=a.ver;b=a.minVer;c=a.maxVer;if(b||c)if(d=this.tX(),!d||b&&0>this.pH(d,b)||c&&0<this.pH(d,c))return a.altHtml||"";d=["<object",this.yT];a.data=a.movie;for(b=0;b<this.HI.length;b++)c=this.HI[b],a.hasOwnProperty(c)&&d.push(" ",c,\'="\',a[c],\'"\');d.push(">");for(b=0;b<this.II.length;b++)c=this.II[b],a.hasOwnProperty(c)&& d.push(\'<param name="\',c,\'" value="\',a[c],\'"/>\');d.push("</object>");return d.join("")}});function nk(a,b){this.P=a;this.RR=b;this.Wh={};this.Kz()}x.extend(nk.prototype,{Kz:function(){var a=this,b=a.P;b.addEventListener("add_overlay",function(b){b=b.overlay;b.ra(a.P,a.RR);a.Wh[b.jd]=b});b.addEventListener("remove_overlay",function(b){b=b.overlay;b.remove();delete a.Wh[b.jd]})}});x.extend(Ae.prototype,{ra:function(a,b){this.P=a;this.ha()||this.ta(this.P.ha());this.Ba=b;this.xb()},xb:function(){var a=this.ha(),a=Nc.Wd.ph(a),a={markerId:this.jd,catalog:"FD01",name:this.zk(),rank:this.bp(),x:a.x,y:a.y,color:this.Hm(),hoverColor:this.gM,backgroundHoverColor:this.jK,borderColor:this.borderColor,borderHoverColor:this.nK,backgroundColor:this.backgroundColor,padding:this.padding,fontSize:this.fontSize,borderWidth:this.borderWidth};if(this.sE||this.getImageData())a.imageUrl=this.sE, a.imageData=this.getImageData(),a.size=this.tb(),a.image=this.Ax(),a.catalog="FD02",this.tb()&&(a.width=this.tb()[0],a.height=this.tb()[1]);this.Ba.UN(a)},hide:function(){this.Pa=q;this.Ba&&this.Ba.Oo(this.jd,"visible",q)},show:function(){this.Pa=o;this.Ba&&this.Ba.Oo(this.jd,"visible",o)},isVisible:v("Pa"),Mf:function(a,b){this.Ba&&("position"==a&&(b=Nc.Wd.ph(b),b={lng:b.x,lat:b.y}),this.Ba.Oo(this.jd,a,b))},remove:function(){this.dispatchEvent(new M("onremove"),{type:"remove",target:this});this.Ba.RK([this.jd])}});var ok={none:"",transit:"FE0A",hotel:"FE02",catering:"FE01",movie:"FE06",indoor_scene:"FEFE"},pk={none:["-1",""],transit:["0","m_transit.png"],hotel:["1","m_hotel.png"],catering:["2","m_catering.png"],movie:["3","m_movie.png"],transit:["4","m_transit.png"],indoor_scene:["5","m_indoor_scene.png"]}; x.extend(Ie.prototype,{ra:function(a,b){this.P=a;this.Ba=b;this.xb()},xb:function(){var a=this.ha(),a=Nc.Wd.ph(a),b=this.mS(),c=this.dE();this.Ba.UN({markerId:this.jd,catalog:b,name:this.mp(),rank:this.bp(),x:a.x,y:a.y,heading:c.heading,pitch:c.pitch,pid:c.panoId,panoIId:c.panoIId})},mS:function(){var a=this.ep().match(/.*\\/(.*)/)[1],b;for(b in pk)if(pk[b][1]==a)return ok[b]},hide:function(){this.Pa=q;this.Ba.Oo(this.jd,"visible",q)},show:function(){this.Pa=o;this.Ba.Oo(this.jd,"visible",o)},isVisible:v("Pa"), Mf:function(a,b){"position"==a&&(b=Nc.Wd.ph(b),b={lng:b.x,lat:b.y});this.Ba.Oo(this.jd,a,b)},remove:function(){this.dispatchEvent(new M("onremove"),{type:"remove",target:this});this.Ba.RK([this.jd])}});lk.oo=new Nc(p,{of:"api"});function lk(a){x.lang.Da.call(this);a&&(this.P=a,this.Mg=p,this.DH=a.C.clientWidth,this.CH=a.C.clientHeight,new nk(a,this))}lk.UP=z.sg("pano");x.lang.ua(lk,x.lang.Da,"PanoramaFlashWraper"); x.extend(lk.prototype,{UN:function(a){this.Is("addMarkers",[a])},RK:function(a){this.Is("removeMarkers",[a])},Oo:function(a,b,c){var d={};d.markerId=a;d[b]=c;this.set("markerProperty",d)},get:function(a){var b=p;"position"==a?(b=this.Mg.get("mercatorPosition"),b=Nc.Wd.Ej(new S(b.mercatorX,b.mercatorY))):b=this.Mg.get(a);return b},set:function(a,b){var c=this;"position"==a?lk.oo.uj(b,function(a){a&&a.id?c.P.rc(a.id):c.dispatchEvent(new M("pano_error"))}):"id"==a?c.Mg==p?c.US(c.P):c.Mg.set&&c.Mg.set("panoOptions", {id:b.id,panoType:b.type,width:c.DH,height:c.CH}):c.Mg&&c.Mg.set&&c.Mg.set(a,b)},Is:function(a,b){return this.Mg.doAction(a,b)},O2:v("Cr"),US:function(a){var b=this,c=a.k.swfSrc.match(/.*\\//)[0]+"BDStreetScape.swf";b.Mg=o;lk.oo.Lx(function(d){var e="",f="";"inter"===a.Le?f=a.Ya:e=a.Ya;e={pid:e,iid:f,panoType:a.Le,heading:a.Ea.heading,pitch:a.Ea.pitch,width:b.DH,height:b.CH,panoUrl:c,panoTileUrl:lk.UP.join("|"),domain:Nc.Qu,jsInterfaceNamespace:"BMap.PanoramaFlashInterface",swfIndex:b.ba};f=a.k.swfSrc; d&&(d.panoUdt&&d.panoUdt.version&&e)&&(e.udtVersion=d.panoUdt.version);d&&(d.panoSwfAPI&&d.panoSwfAPI.version&&e)&&(e.panoUrl=e.panoUrl+"?version="+d.panoSwfAPI.version,f=f+"?version="+d.panoSwfAPI.version);b.Mg=b.iR(a.C,e,f)})},iR:function(a,b,c){var d=new mk,e="PanoramaFlash"+this.ba,f=p,f=K("div");f.style.position="absolute";f.id="PanoramaFlashWraper"+this.ba;f.style.top="0";f.style.left="0";f.style.height="100%";f.style.width="100%";f.style.zIndex=1200;this.Cr=f;a.appendChild(f);d.create({id:e, width:"100%",height:"100%",allowscriptaccess:"always",scale:"showall",wmode:"opaque",quality:"best",url:c,ver:"10.2",errorMessage:"\\u60a8\\u672a\\u5b89\\u88c5Flash Player\\u64ad\\u653e\\u5668\\u6216\\u8005\\u7248\\u672c\\u8fc7\\u4f4e",vars:b},f);return d.VL(e)}});var qk=lk.prototype;U(qk,{get:qk.get,set:qk.set,doAction:qk.Is}); ');