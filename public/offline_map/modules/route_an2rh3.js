/**/_jsload2&&_jsload2('route', 'var Vh={web:"http://api.map.baidu.com/direction?",android:"bdapp://map/direction?",ios:"baidumap://map/direction?"};function Wh(a){this.city=a.city;this.bw=a.start;this.nv=a.end;this.Fr=a.Rt;this.moreResultsUrl=a.url;this.taxiFare=a.EO||p;this.HU=a.xO||Sd;this.KR=a.jL||Sd}x.extend(Wh.prototype,{wj:v("bw"),kh:v("nv"),TX:v("HU"),pX:v("KR"),Hx:function(){return this.Fr.length},rf:function(a){if(this.Fr[a])return this.Fr[a]}});function Xh(a){Wh.call(this,a);this.policy=a.ad}x.ua(Xh,Wh,"DrivingRouteResult"); function Yh(a){Wh.call(this,a)}x.ua(Yh,Wh,"WalkingRouteResult");function Zh(a){Wh.call(this,a);this.policy=a.ad}x.ua(Zh,Wh,"TransitRouteResult");var $h=Wh.prototype;U($h,{getStart:$h.wj,getEnd:$h.kh,getStartStatus:$h.TX,getEndStatus:$h.pX,getNumPlans:$h.Hx,getPlan:$h.rf});function ai(a){this.ik=a.vF.slice(0);this.cg=a.nd||0;this.Zq=a.duration||0;this.tR=a.GW||[]}x.extend(ai.prototype,{mh:function(a){if(this.ik[a])return this.ik[a]},ht:function(){return this.ik.length},Ue:function(a){return a===q?this.cg:bi(this.cg)},bt:function(a){return a===q?this.Zq:ci(this.Zq,"nav")},nX:v("tR")});var di=ai.prototype;U(di,{getNumRoutes:di.ht,getRoute:di.mh,getDistance:di.Ue,getDuration:di.bt,getDragPois:di.nX});function ei(a){ai.call(this,a);this.Wi=a.RY;this.ml=a.description;this.Zq=a.duration||0}x.ua(ei,ai,"TransitRoutePlan"); x.extend(ei.prototype,{Gx:function(){return this.Wi.length},$D:function(a){if(this.Wi[a])return this.Wi[a]},jh:function(a){return a===q?Q.RN(this.ml):this.ml},bt:function(a){return a===q?this.Zq:ci(this.Zq,"bustime")},zX:function(){for(var a="",b=this.Wi.length-1,c=0;c<b;c++)this.Wi[c]&&this.Wi[c].title&&(a+=this.zL(this.Wi[c].title)+" \\u2192 ");return a+=this.zL(this.Wi[b].title)},zL:function(a){return a.substring(0,a.indexOf("("))},eY:function(){for(var a=0,b=this.ik.length,c=0;c<b;c++)a+=this.ik[c].Ue(q); return bi(a)}});var fi=ei.prototype;U(fi,{getNumLines:fi.Gx,getLine:fi.$D,getNumRoutes:fi.ht,getRoute:fi.mh,getDistance:fi.Ue,getDuration:fi.bt,getDescription:fi.jh});function gi(a){this.$r=a.Fj&&a.Fj.slice(0)||[];this.cg=a.nd||0;this.Xj=a.index||0;this.Hr=a.ia.slice(0);this.qB=a.eF||0;this.nU=a.Jy;0===this.cg&&2<this.Hr.length&&(this.Hr.length=2)}x.extend(gi.prototype,{Ix:function(){return this.$r.length},RL:function(a){if(this.$r[a])return this.$r[a]},Ue:function(a){return a===q?this.cg:bi(this.cg)},YD:v("Xj"),jp:v("Yi"),ve:v("Hr"),lp:v("nU"),KX:v("qB")});var hi=gi.prototype; U(hi,{getNumSteps:hi.Ix,getStep:hi.RL,getDistance:hi.Ue,getIndex:hi.YD,getPolyline:hi.jp,getPath:hi.ve,getRouteType:hi.lp});function ii(a){this.title=a.title;this.uid=a.uid;this.type=a.type;this.aj=a.G_.slice(0);this.Hr=a.ia.slice(0);this.cg=a.nd||0;this.xT=a.iZ||0;this.Cd=a.status||{}}x.extend(ii.prototype,{FX:v("xT"),XD:function(){return this.aj[0]},WD:function(){return this.aj[1]},ve:v("Hr"),jp:v("Yi"),Ue:function(a){return a===q?this.cg:bi(this.cg)},mp:v("title")});var ji=ii.prototype;U(ji,{getNumViaStops:ji.FX,getGetOnStop:ji.XD,getGetOffStop:ji.WD,getPath:ji.ve,getPolyline:ji.jp,getDistance:ji.Ue,getTitle:ji.mp});function ki(a){this.Zh=a.point;this.Xj=a.index;this.ml=a.description;this.cg=a.nd||0;this.kU=a.t4||0;this.qB=a.eF||0}x.extend(ki.prototype,{ha:v("Zh"),YD:v("Xj"),jh:function(a){return a===q?Q.RN(this.ml):this.ml},Ue:function(a){return a===q?this.cg:bi(this.cg)},g3:v("kU"),KX:v("qB")});var li=ki.prototype;U(li,{getPosition:li.ha,getIndex:li.YD,getDescription:li.jh,getDistance:li.Ue});x.extend(ke.prototype,{va:function(a){window.RouteAddrInst=this;var b={},a=this.cc=this.uZ(this.cc,a);if(a.result){var c=this.ee=a.content.tpList.length+1,d=a.content,e=[],f=[],g=["sel_n","sel_n1","sel_y","sel_x","sel_x1"],i=[-1,-1],k=[],f=[];this.uu=[a.current_city.code,a.current_city.code];tempCode=a.current_city.code;for(var l=0;l<c+1;l++){var m=p;e.push([]);k.push("");f.push("");0==l?a.result.start_city&&(this.uu[0]=a.result.start_city.code||a.result.start_city[0].code,tempCode=this.uu[0]):a.result.end_city&& (this.uu[l]=a.result.end_city.code||a.result.end_city[l-1].code,tempCode=this.uu[l]);m=this.pi(l);if(0<a.result.count[l]&&1!=a.result.city_list[l]){13!=a.result.type&&24!=a.result.type&&(f[l]=\'<a href="javascript:void(0)" ></a>\');e[l].push(\'<div id="RADiv_ResItem\'+l+\'" class="sel_body_body_div sel_body_resitem">\');var n=[0,9];10>m.length&&(n[1]=m.length-1);e[l].push(this.XM(l,n));10<a.result.count[l]&&(e[l].push(\'<div id="RADiv_PAGE\'+l+\'" style="height:20px;" class="sel_body_body_page"></div>\'),this.NO[l]= Math.ceil(a.result.count[l]/10),this.ws[l]=1);e[l].push("</div>");1==a.result.prio_flag[l]?(i[l]=2,this.Ma[l].n=m[0].name,this.Ma[l].c=tempCode,this.Ma[l].u=m[0].uid,n=T.yb(Q.eb(m[0].geo,o).point),this.Ma[l].x=n.lng,this.Ma[l].y=n.lat,this.Ma[l].t=m[0].poiType,this.xg=n=this.VJ(this.k.ja.map,n,m[0].name,l),this.QE.push(n.point),k[l]=m[0].name):i[l]=0}}for(var s,u,l=0;l<i.length;l++)if(m=i[l],3==m&&!s)this.kj=l,u&&(i[u-1]=1),s=l+1;else if(s){if(0==m||3==m)i[l]=m+1}else 0==m&&!u?(this.kj=l,u=l+1):u&& 0==m&&(i[l]=1);b.startPointClass=g[i[0]];this.Yy=a.result.s_query?a.result.s_query:a.result.s_wd;b.startPoint=""==k[0]?this.Yy:k[0];b.startBody=e[0].join("");b.endPointClass=g[i[c]];this.qx=a.result.e_query?"string"==typeof a.result.e_query?a.result.e_query:a.result.e_query[c-1]:"string"==typeof a.result.e_wd?a.result.e_wd:a.result.e_wd[c-1];b.endPoint=""==k[c]?this.qx:k[c];b.endBody=e[c].join("");b.startButton=f[0];b.endIndex=c;b.endButton=f[c];this.PO=[];s=[""];for(l=0;l<d.tpList.length;l++)u=l+ 1,c=k[u],""==c&&(c=a.result.m2[l]),this.PO.push(c),s.push([\'<div id="RouteAddress_DIV\'+u+\'" class="\'+g[i[u]]+\'">\',\'  <div class="sel_body">\',\'    <div class="sel_body_top"  onclick="RouteAddrInst.showLst(\'+u+\')">\',\'     <div class="sel_body_title">\\n        <div class="sel_body_sign"></div>\',\'        <div class="sel_body_name">\\u9014\\u7ecf\\u70b9\'+u+\'\\uff1a<b id="B_PointName\'+u+\'">\'+c+"</b></div>","      </div>",\'     <div id="RD_TOP_BUT\'+u+\'" class="sel_body_button">\'+f[u]+"</div>","    </div>",\'    <div class="sel_body_body" id="RADIV_BODY\'+ u+\'">\'+e[u].join("")+"</div>","  </div>\\n</div>"].join("\\n"));b.tpList=s.join("");return this.R_(b)}},jC:function(){var a;x.$("RouteAddress_DIV0")&&(a=x.$("RouteAddress_DIV0").getElementsByTagName("tr"),this.$N(a));x.$("RouteAddress_DIV1")&&(a=x.$("RouteAddress_DIV1").getElementsByTagName("tr"),this.$N(a));var b=this;this.Ab&&this.Ab.addEventListener("open",function(){var a=x.$("selInfoWndBtn");x.M(a,"click",function(){var c=a.getAttribute("data-uid").split("_");b.itmSelect(c[0],c[1])});x.M(a,"mouseover", function(){b._selBtnOver(a)});x.M(a,"mousedown",function(){b._selBtnDown(a)});x.M(a,"mouseout",function(){b._selBtnOut(a)})});var c,d;x.$("RouteAddress_DIV0")&&(c=x.$("RouteAddress_DIV0").firstChild.firstChild,x.M(c,"click",function(){var a=c.getAttribute("data-uid");b.showLst(a)}));x.$("RouteAddress_DIV1")&&(d=x.$("RouteAddress_DIV1").firstChild.firstChild,x.M(d,"click",function(){var a=d.getAttribute("data-uid");b.showLst(a)}))},$N:function(a){var b=this;this.Eb(a,function(a,d){x.M(d,"mouseover", function(a){var c=d.getAttribute("data-uid").split("_");n2=parseInt(c[1],10);Sg=parseInt(c[2],10);b._lstMouseOver(this,0,c[0],Sg-n2,a)});x.M(d,"mouseout",function(a){var c=d.getAttribute("data-uid").split("_");n2=parseInt(c[1],10);Sg=parseInt(c[2],10);b._lstMouseOut(this,0,c[0],Sg-n2,a)});x.M(d,"click",function(a){var c=d.getAttribute("data-uid").split("_"),e=parseInt(c[0],10);n2=parseInt(c[1],10);Sg=parseInt(c[2],10);b.select(e,Sg,a)});var e=d.childNodes[2].getElementsByTagName("div")[0];x.M(e,"click", function(){var a=e.getAttribute("data-uid").split("_");b.itmSelect(a[0],a[1])});x.M(e,"onmouseover",function(){b._selBtnOver(e)});x.M(e,"onmouseout",function(){b._selBtnOut(e)});x.M(e,"onmousedown",function(){b._selBtnDown(e)})})},uZ:function(a,b){a.content||(a.content={start:[],end:[]});a.content.tpList=[];if(19==a.result.type){this.vZ(a,b);var c=a.content,d=[],e=c.length;a.content={start:[],end:[]};if(2<e)for(var f=1;f<e-1;f++)d.push(c[f]);a.content.end=c[e-1];a.content.tpList=d;a.content.start= c[0]}return a},vZ:function(a,b){var c={},d,e=0,f=0,g=[],i,k=a.result;d=[];c.city_list=[];c.count=[];c.current_null=[];c.e_query=[];c.e_wd=[];c.end_city=[];c.wd2=[];c.prio_flag=[];c.sug_index=[];c.total=[];c.s_wd="";c.s_query="";this.Nw=[];k.e_wd||(k.e_wd=[],k.e_query=[]);d=this.HN(b.start);i=d.type;c.s_wd=1==i?d.ub:k.s_wd;c.s_query=1==i?d.ub:k.s_query;1==i&&(this.Ma[e].o=c.s_wd,this.Ma[e].x=d.point.split(",")[0],this.Ma[e].y=d.point.split(",")[1]);this.Nw.push(2==i);c.total.push(1==i?1:k.total[f]); c.count.push(1==i?1:k.count[f]);c.current_null.push(1==i?0:k.current_null[f]);c.prio_flag.push(1==i?1:k.prio_flag[f]);c.sug_index.push(1==i?"":k.sug_index[f]);g.push(1==i?[{name:d.ub,geo:"1|"+d.point+";"+d.point+"|"+d.point+";"}]:a.content[f]);c.city_list.push(1==i?0:k.city_list[f]);c.wd2.push(1==i?"":k.wd2[f]);2==i&&f++;e++;d=decodeURIComponent(b.end).split("to:");for(var l=0,m;m=d[l];l++){m=this.HN(m);i=m.type;2==i&&m.uid&&m.point&&(i=1);this.Nw.push(2==i);var n=2==i?m.ub:0==f?k.s_wd:k.e_wd[f-1]; c.e_wd.push(n);c.e_query.push(n);c.end_city.push(1==i?a.current_city:0==f?k.start_city:k.end_city[f-1]);1==i&&(this.Ma[e].o=c.s_wd,this.Ma[e].x=m.point.split(",")[0],this.Ma[e].y=m.point.split(",")[1]);m.Aj&&(this.AY(e-1,{Ey:c.e_wd[e-1],is:c.wd2[e],point:1==i?Q.NL(m.point):p,uid:m.uid}),this.wu.push({Ey:c.e_wd[e-1],is:c.wd2[e],point:1==i?Q.NL(m.point):p,uid:m.uid}));c.total.push(1==i?1:k.total[f]);c.count.push(1==i?1:k.count[f]);c.current_null.push(1==i?0:k.current_null[f]);c.prio_flag.push(1==i? 1:k.prio_flag[f]);c.sug_index.push(1==i?"":k.sug_index[f]);g.push(1==i?[{name:m.ub,geo:"1|"+m.point+";"+m.point+"|"+m.point+";"}]:a.content[f]);c.city_list.push(1==i?0:k.city_list[f]);c.wd2.push(1==i?"":k.wd2[f]);2==i&&f++;e++}x.extend(a.result,c);a.content=g},AY:function(a,b){var c=x.extend({},b);if(this.vu.length>a)this.vu[a]=b;else if(this.vu.length==a)this.vu.push(b);else return;this.vu[a]=c},HN:function(a){a=decodeURIComponent(a);a=a.split("$$");return{type:a[0],uid:a[1],point:a[2],ub:a[3],t3:a[4], C3:a[5],u2:a[6],Aj:a[7]}},pi:function(a){return 0==a?this.cc.content.start:a==this.ee?this.cc.content.end:this.cc.content.tpList[a-1]},XM:function(a,b,c){this.ki=-1;var c=c?c:this.pi(a),d=[];d.push(\'<div id="RA_ResItem_\'+a+\'"><table border="0" cellspacing="0" cellpadding="0" style="width:100%">\');for(var e=b[0];e<=b[1];e++){d.push(\'<tr  onmouseover="RouteAddrInst._lstMouseOver(this, 0,\'+a+", "+(e-b[0])+\', event)" onmouseout="RouteAddrInst._lstMouseOut(this, 0,\'+a+", "+(e-b[0])+\', event)" onclick="RouteAddrInst.select(\'+ a+","+e+\', event)"  filter = "item" data-uid="\'+a+"_"+b[0]+"_"+e+\'"  ><th><div title="\\u5728\\u56fe\\u4e0a\\u663e\\u793a\\u8be5\\u70b9" class="icon iconbg" id="no_\'+a+"_"+(e-b[0]+1)+\'"></div></th>\');var f=0==a?"\\u9009\\u4e3a\\u8d77\\u70b9":a==this.ee?"\\u9009\\u4e3a\\u7ec8\\u70b9":"\\u9009\\u4e3a\\u9014\\u7ecf\\u70b9";d.push(\'<td style="word-break:break-all;padding-right:24px">\');d.push(\'<a href="javascript:void(0)">\'+c[e].name+"</a>");c[e].addr&&""!=c[e].addr&&(d.push("<div>"),0==c[e].poiType?d.push(\'<span style="color:#999">\\u5730\\u5740: \'+ c[e].addr+"</span>"):1==c[e].poiType?d.push(\'<span style="color:#999">\\u9014\\u7ecf\\u516c\\u4ea4\\u8f66\\uff1a</span>\'+c[e].addr.split(";").join("; ")):3==c[e].poiType&&d.push(\'<span style="color:#999">\\u9014\\u7ecf\\u5730\\u94c1\\uff1a</span>\'+c[e].addr.split(";").join("; ")),d.push("</div>"));d.push("</td>");d.push(\'<td style="vertical-align:middle;width:106px"><div tid="selBtn_\'+a+"_"+e+\'" class="selBtn"  onclick="RouteAddrInst.itmSelect(\'+a+","+e+\');return false;" onmouseover="RouteAddrInst._selBtnOver(this)" onmouseout="RouteAddrInst._selBtnOut(this)" onmousedown="RouteAddrInst._selBtnDown(this)" data-uid = "\'+ a+"_"+e+\'"  >\'+f+"</div>");d.push(\'<a data-uid="\'+c[e].uid+\'" href="javascript:void(0);" class="list_street_view_poi" style="visibility:hidden"><img src="/static/images/transparent.gif" ></a>\');d.push("</td>");d.push("</tr>")}d.push("</table></div>");return d.join("")},VJ:function(a,b,c,d,e){0==d?a=W.Eo(a,b,c,mi):d==this.ee?a=W.Eo(a,b,c,ni):(c=this.wu[d-1],c.point=b,e&&(c.uid=e),a=W.$J(a,b,d-1));return a},R_:function(a){var b=[];b.push(\'<div class="RouteAddressOuterBkg">\');b.push(\'<div class="RouteAddressTip"><span>\\u8bf7\\u9009\\u62e9\\u51c6\\u786e\\u7684\\u8d77\\u70b9\\u3001\\u9014\\u7ecf\\u70b9\\u6216\\u7ec8\\u70b9</span></div>\'); b.push(\'<div class="RouteAddressInnerBkg">\');b.push(\'<div id="pos5" style="display:none"></div>\');b.push(\'<div id="RouteAddress_DIV0" class="\'+a.startPointClass+\'"> \');b.push(\'<div class="sel_body">\');b.push(\'<div class="sel_body_top" data-uid="0" onclick="RouteAddrInst.showLst(0)" >\');b.push(\'<div class="sel_body_title">\');b.push(\'<div class="sel_body_sign"></div>\');b.push(\'<div class="sel_body_name">\\u8d77\\u70b9\\uff1a<b id="B_PointName0">\'+a.startPoint+"</b></div>");b.push("</div>");b.push(\'<div id="RD_TOP_BUT0" class="sel_body_button">\'+ a.startButton+"</div>");b.push("</div>");b.push(\'<div class="sel_body_body" id="RADIV_BODY0">\'+a.startBody+"</div>");b.push("</div>");b.push("</div>");b.push(a.tpList);b.push(\'<div id="RouteAddress_DIV\'+a.endIndex+\'" class="\'+a.endPointClass+\'">\');b.push(\'<div class="sel_body">\');b.push(\'<div class="sel_body_top" data-uid=\'+a.endIndex+\' onclick="RouteAddrInst.showLst(\'+this.ee+\')" >\');b.push(\'<div class="sel_body_title">\');b.push(\'<div class="sel_body_sign"></div>\');b.push(\'<div class="sel_body_name">\\u7ec8\\u70b9\\uff1a<b id="B_PointName\'+ a.endIndex+\'">\'+a.endPoint+"</b></div>");b.push("</div>");b.push(\'<div id="RD_TOP_BUT\'+a.endIndex+\'" class="sel_body_button">\'+a.endButton+"</div>");b.push("</div>");b.push(\'<div class="sel_body_body" id="RADIV_BODY\'+a.endIndex+\'">\'+a.endBody+"</div>");b.push("</div>");b.push("</div>");b.push(\'<div id="pos6" style="display:none"></div>\');b.push("</div>");b.push("</div>");return b.join("")},showLst:function(a){this.kj=a;var b=this.cc.content.tpList.length+1,c=this.pi(a);if(!c||!(1==c.length&&c[0].rE&& 1==c[0].rE)){var d=this.ws,e=x.$("RouteAddress_DIV"+a).className;if(!("sel_n"==e||"sel_x"==e||this.Nw&&!this.Nw[a])){if("sel_n1"==e||"sel_y"==e||"sel_x1"==e){for(var f=0;f<=b;f++){var g=x.$("RouteAddress_DIV"+f);ja.Ec("B_PointName"+f).innerHTML=this.lX(f);"sel_x"==g.className?g.className="sel_x1":"sel_n"==g.className&&(g.className="sel_n1")}this.vC();this.xg&&(this.map.Ub(this.xg),this.xg=p);"sel_y"==e&&(this.Ma[a]={o:"",Dd:0,An:0,x:0,y:0,pa:-1},this.Pp[a]=0);0>=this.cc.result.count[a]?x.$("RouteAddress_DIV"+ a).className="sel_x":(x.$("RouteAddress_DIV"+a).className="sel_n",1!=this.cc.result.city_list[a]&&(b=10*(d[a]-1)+9,c.length<b+1&&(b=c.length-1),this.Go(a,[10*(d[a]-1),b])))}this.ki=-1}}},EB:function(a,b){var c;x.$("RA_ResItem_"+a)&&(c=x.$("RA_ResItem_"+a).childNodes[0]);if(c&&(c=c.rows[b]))c.style.backgroundColor="#F4F4F4",c.getElementsByTagName("td")[1].childNodes[0].style.visibility="visible",c.getElementsByTagName("th")[0].childNodes[0].style.backgroundPosition=24*-b+"px -32px";this.Tf.length> b&&(this.Tf[b].Vb(new $c(F.nG,F.pP,{offset:F.oP,imageOffset:new L(-F.mP*b,-F.nP),infoWindowOffset:F.mG})),this.pJ(this.Tf[b],o,o))},_lstMouseOver:function(a,b,c,d){a=this.k.ja.map;this.ki!=d&&(a.Xc(),this.EB(c,d))},_lstMouseOut:function(a,b,c,d){this.ki!=d&&this.nw(c,d)},nw:function(a,b){var c=p;x.$("RA_ResItem_"+a)&&(c=x.$("RA_ResItem_"+a).childNodes[0]);c&&(c=c.rows[b],c.style.backgroundColor="#ffffff",c.getElementsByTagName("td")[1].childNodes[0].style.visibility="",c.getElementsByTagName("th")[0].childNodes[0].style.backgroundPosition= 24*-b+"px -64px");this.Tf.length>b&&(this.Tf[b].Vb(new $c(F.nG,F.qG,{offset:F.H0,imageOffset:new L(-F.pG*b,-F.oG),infoWindowOffset:F.G0})),this.pJ(this.Tf[b],q))},pJ:function(a,b,c){a&&a.Di&&(b&&!a.nI&&a.Zc&&a.Zc.style?(a.nI=o,c?a.Di(o,1000100):a.Di(o)):!b&&(a.Zc&&a.Zc.style)&&(delete a.nI,a.Di(q)))},select:function(a,b,c){if(2<arguments.length&&(c=c||window.l2,"selBtn"==(c.srcElement||c.target).className))return;var d=this.pi(a);this.map.Xc();d&&(this.Op[0]!=this.Op[1]&&this.xg&&this.map&&this.map.Eh(this.an), this.DU(d,a,b),-1!=this.ki&&this.nw(a,this.ki),this.ki=b%10,this.EB(a,this.ki))},vC:function(){var a=this;(function c(){0!==a.Tf.length&&(a.map.Ub(a.Tf.shift()),c())})();(function d(){0!==a.an.length&&(a.an.shift(),d())})()},itmSelect:function(a,b){var c=this.map,d=this.pi(a);this.Ma[a].n=d[b].name;this.Ma[a].c=this.Op[a];this.Ma[a].u=d[b].uid;var e=T.yb(Q.eb(d[b].geo_base64||d[b].geo,o).point);this.Ma[a].x=e.lng;this.Ma[a].y=e.lat;this.Ma[a].t=d[b].poiType;x.$("B_PointName"+a)&&(x.$("B_PointName"+ a).innerHTML=d[b].name);this.xg=this.VJ(c,e,d[b].name,a);0!=a&&a!=this.ee&&(this.wu[a-1].Ey=d[b].name);this.vC();if(this.CY())this.xg&&(c.Ub(this.xg),this.xg=p),this.submit();else{x.$("RouteAddress_DIV"+a)&&(x.$("RouteAddress_DIV"+a).className="sel_y");for(c=0;1<=this.ee;){c=(a+1)%(this.ee+1);x.$("RouteAddress_DIV"+c)&&x.$("RouteAddress_DIV"+c);break}if(0==this.Pp[c]){x.$("RouteAddress_DIV"+c)&&(x.$("RouteAddress_DIV"+c).className="sel_n");var d=this.ws[c],e=10*(d-1)+9,f=this.pi(c);f.length<e+1&& (e=f.length-1);this.Go(c,[10*(d-1),e]);this.select(c,0)}else 2==this.Pp[c]?x.$("RouteAddress_DIV"+c)&&(x.$("RouteAddress_DIV"+c).className="sel_n"):x.$("RouteAddress_DIV"+c)&&(x.$("RouteAddress_DIV"+c).className="sel_x");this.kj=c}},submit:function(){var a=this.map,b=this.Ma[0].c,c=this.Ma[this.ee].c;if(b==c)var d=b;var e={},f=new M("onpoiselected");if(13==this.cc.result.type||23==this.cc.result.type||24==this.cc.result.type)23==this.cc.result.type&&b!=c?(e.c=d||this.cc.current_city.code,e.sc=b,e.ec= c,e.sn="1$$$$"+this.Ma[0].x+","+this.Ma[0].y+"$$"+this.Ma[0].n+"$$$$$$",e.en="1$$$$"+this.Ma[1].x+","+this.Ma[1].y+"$$"+this.Ma[1].o+"$$$$$$"):(e.c=d||this.cc.current_city.code,e.sc=b,e.ec=c,e.sn="1$$"+this.Ma[0].u+"$$"+this.Ma[0].x+","+this.Ma[0].y+"$$"+this.Ma[0].n+"$$$$$$",e.en="1$$"+this.Ma[1].u+"$$"+this.Ma[1].x+","+this.Ma[1].y+"$$"+this.Ma[1].n+"$$$$$$");else{for(var g=d="",i=this.ee,k=0,l=this.wu.length;k<l;k++)d+=this.Nx(this.wu[k]),g+=this.Ma[k+1].c+"+to:";e.sc=b;e.ec=g+c;e.sn="1$$$$"+this.Ma[0].x+ ","+this.Ma[0].y+"$$"+this.Ma[0].n+"$$$$$$";e.en=d+"1$$$$"+this.Ma[i].x+","+this.Ma[i].y+"$$"+this.Ma[i].n+"$$$$$$"}e.sq=this.Yy;e.eq=this.qx;f.paramInfo=e;f.sType=this.Ky;a.dispatchEvent(f)},Nx:function(a,b){var c=2,d="",e="",f="",g="0",i="";if(a.point||a.ON)c=1,e=a.point?a.point.lng+","+a.point.lat:a.ON.lng+","+a.ON.lat,a.uid&&(c=2,d=a.uid);a.Ey&&(f=a.Ey);a.is&&(g="1",i=a.is);isNaN(b)||(c=b);return c+"$$"+d+"$$"+e+"$$"+f+"$$"+g+"$$"+i+"$$$$1$$+to:"},CY:function(){for(var a=0;a<=this.ee;a++)if(""== this.Ma[a].n&&!this.Ma[a].x&&!this.Ma[a].y||this.Ma[a].n==j)return q;return o},_selBtnOver:function(a){a.style.backgroundPosition="-100px -81px"},_selBtnOut:function(a){a.style.backgroundPosition="-21px -81px"},_selBtnDown:function(a){a.style.backgroundPosition="-220px -81px";a.style.fontWeight="bold"},ra:function(){var a=this,b=this.ee;this.oO(this.cc);a.kO();for(var c=0;c<=b;c++)x.$("RADiv_PAGE"+c)&&(pg0=new ce("RADiv_PAGE"+c,function(b){var c=a.kj,d=[10*(b-1),10*b-1];a.Vt[c]<d[1]+1&&(d[1]=a.Vt[c]- 1);x.K.remove=function(a){var a=x.$(a),b=a.parentNode;b&&b.removeChild(a)};x.$("RA_ResItem_"+c)&&(x.K.remove(x.$("RA_ResItem_"+c)),ja.K.Yx(x.$("RADiv_ResItem"+c),"AFTERBEGIN",a.XM(c,d)));a.Go(c,d,o);x.$("RADiv_ResItem"+c).scrollTop=0;a.ws[c]=b},{Vf:5,Kd:a.NO[c],page:a.ws[d]}));var d=[0,9],c=this.kj,e=ja.Ec("RouteAddress_DIV"+c),f=this.pi(c);"sel_n"==e.className?this.cc.content&&(this.cc.result.city_list&&1!=this.cc.result.city_list[c]&&f&&0<f.length)&&(f.length<d[1]+1&&(d[1]=f.length-1),a.Go(c,d), a.select(c,0)):this.xg&&"sel_x"==e.className&&this.map.Eh(this.QE);for(var d=0;d<=b;d++)"sel_y"==x.$("RouteAddress_DIV"+d).className&&(c=this.pi(d),0<c.length&&(c[0].rE&&1==c[0].rE)&&(ja.m4(ja.Ec("RD_TOP_BUT"+d),"sel_body_button"),x.$("RD_TOP_BUT"+d).innerHTML=""))},kP:function(){var a=this.ee;this.oO(this.cc);this.kO();for(var b=0;b<=a;b++){var c=this.kj,d=[0,9];this.Vt[c]<d[1]+1&&(d[1]=this.Vt[c]-1);this.Go(c,d,o)}a=[0,9];b=this.kj;ja.Ec("RouteAddress_DIV"+b);c=this.pi(b);1==b?this.cc.content&& (this.cc.result.city_list&&1!=this.cc.result.city_list[b]&&c&&0<c.length)&&(c.length<a[1]+1&&(a[1]=c.length-1),this.Go(b,a)):this.xg&&0==b&&this.map&&this.map.Eh(this.QE);this.select(b,0)},oO:function(a){var b=this.map;if(a.mW&&!(a.result.r4&1)&&(29==a.result.type||13==a.result.type)){var a=a.mW,c=["country","province","city","area"],c=a.type!=p?modelConfig.ug[c[a.type]]:j,a=a.Hd!=p?a=Q.eb(a.Hd,o).point:j;b.OW?(c&&b.Hg(c),a&&b.Wf(a)):(b.OW=o,b.Ed(a||b.wc(),c||b.ga()))}},kO:function(){this.Op=this.uu; for(var a=0;a<=this.ee;a++)0<this.cc.result.count[a]?0==this.cc.result.city_list[a]?(this.Pp[a]=1==this.cc.result.prio_flag[a]?1:0,this.Vt[a]=this.cc.result.count[a]):this.Pp[a]=2:this.Pp[a]=3},Go:function(a,b){var c=this,d=this.pi(a),e=c.map;c.vC();if(d){for(var f=b[0];f<=b[1];f++){var g=Q.eb(d[f].geo_base64||d[f].geo,o);c.Tf.push(W.gV(g.ia[0],f-b[0],d[f].name,e));c.an.push(g.ia[0])}d=c.an;c.xg&&c.Op[0]==c.Op[1]&&d.push(c.xg.point);if(this.map.oa()==Pa){var g=Gd[Pa].U1[e.Sb][1],i=getPointsBounds(d), k=e.lt(i).zoom;g.yt(i)?(15>=k&&(k=15),e.Ed(d[0],k)):e&&e.Eh(d)}else e&&e.Eh(d);11==c.an.length&&c.an.pop();for(var l=this.Tf,f=b[0];f<=b[1];f++)(function(){var d=f;l[f-b[0]]&&(l[f-b[0]].addEventListener("click",function(){c.select(a,d)}),l[f-b[0]].addEventListener("mouseover",function(){var b=d%10;c.ki!=b&&c.EB(a,b)}),l[f-b[0]].addEventListener("mouseout",function(){var b=d%10;c.ki!=b&&c.nw(a,b)}))})()}},DU:function(a,b,c){var d=this,e=a[c],a="<span class=\'iw_poi_title\' title=\'"+e.name+"\'>"+e.name+ "</span>",f=[],g="";e.addr&&""!=e.addr&&(0==e.poiType?g="\\u5730\\u5740: "+e.addr:1==e.poiType?g="\\u9014\\u7ecf\\u516c\\u4ea4\\u8f66\\uff1a"+e.addr.split(";").join("; "):3==e.poiType&&(g="\\u9014\\u7ecf\\u5730\\u94c1\\uff1a"+e.addr.split(";").join("; ")));f.push("<div style=\'padding:11px 11px 6px 11px;line-height:20px;word-break:break-all\'>"+g+"</div>");f.push("<div style=\'line-height:180%;margin-bottom:10px;\'>");e="\\u9009\\u4e3a\\u9014\\u7ecf\\u70b9";0==b&&(e="\\u9009\\u4e3a\\u8d77\\u70b9");b==this.ee&&(e="\\u9009\\u4e3a\\u7ec8\\u70b9"); f.push("<div style=\'text-align:center;\'><div id=\'selInfoWndBtn\' class=\'selInfoWndBtn\'  data-uid = \'"+b+"_"+c+"\'  />"+e+"</div>");f.push("</div>");this.Ab?(this.Ab.Dc(a),this.Ab.bd(f.join(""))):(this.Ab=new cd(f.join(""),{title:a,height:0,width:280,margin:[0,0,0,0]}),this.Ab.addEventListener("open",function(){var a=x.$("selInfoWndBtn");x.M(a,"click",function(){var b=a.getAttribute("data-uid").split("_");d.itmSelect(b[0],b[1])});x.M(a,"mouseover",function(){d._selBtnOver(a)});x.M(a,"mousedown",function(){d._selBtnDown(a)}); x.M(a,"mouseout",function(){d._selBtnOut(a)})}),this.Ab.addEventListener("close",function(){d.nw(b,i)}));var i=c%10;this.Tf&&this.Tf[i]&&this.Tf[i].Mb(this.Ab)},lX:function(a){a==j&&(a=this.kj);return 0==a?this.Yy:a==this.ee?this.qx:this.PO[a-1]},Eb:function(a,b){for(var c=0,d=a.length;c<d;c++)b(c,a[c])}});ee.HH=function(a,b,c){var d="";0===c&&(d+=";border-top:1px solid #e4e6e7");var e="nav-ed";0===c&&(e="nav-st");c=["<div style=\'"+d+"\'><div style=\'cursor:pointer;padding:8px 0 8px 10px;line-height:15px\'"];c.push("onclick=\'"+b+"\'>");c.push("<span class=\'navtrans-navlist-icon "+e+"\'></span>");c.push("<div style=\'overflow:hidden;line-height:20px;\'>"+a);c.push("</div></div></div>");return c.join("")}; ee.GH=function(a,b,c){return\'<h1 style="margin:0;border-top:1px solid #e4e6e7;\'+(c?"border-bottom:1px solid #e4e6e7;padding:10px 0 10px 7px;":"padding:10px 0 9px 7px;")+"font:bold 16px "+F.fontFamily+\'"> \'+b+"\\u524d\\u5f80 "+a+" \\u7684\\u8def\\u7ebf</h1>"}; x.extend(ee.prototype,{search:function(a,b){return!a||!b?(this.Qe(),this.sb(5),this.Ra(X.Tc),q):o},Qe:function(){delete this.ka;delete this.fa;delete this.Ga;delete this.Iq;delete this.Ol;var a=this.k.ja;this.sb();a.Ha&&(a.Ha.innerHTML="");a.map&&a.map.Xc();this.Pj();this.lb=-1},bf:function(a,b){var c,b=b||{};"string"===typeof a?c=[2,"","",a,0,""]:a instanceof N||a instanceof H?(c=T.yb(a),c=[1,"",c.lng+","+c.lat,b.b5||"",0,""]):(c=T.yb(a.point),c=[1,""+a.uid,c.lng+","+c.lat,a.title,0,""]);return c.join("$$")+ "$$"},Rh:function(a,b){var c;"string"===typeof a?c=a:(c=a instanceof N||a instanceof H?a:a.point,c=c.lat+","+c.lng);"string"!==typeof a&&(b&&""!==b&&"string"===typeof b)&&(c="name:"+b+"|latlng:"+c);return c},Nx:function(a){return this.bf(a)+"$$1$$"},m1:function(){var a;"string"===typeof dest?a=dest:(a=dest instanceof N||dest instanceof H?dest:dest.point,a=a.lat+","+a.lng);return a}});var mi=0,ni=1; function bi(a){"string"===typeof a&&(a=parseFloat(a));a=!a||0>a?"0\\u7c73":10>=a?"10\\u7c73":1E3>a?10*Math.round(a/10)+"\\u7c73":(a/1E3).toFixed(1)+"\\u516c\\u91cc";"1000\\u7c73"===a&&(a="1.0\\u516c\\u91cc");return a} function ci(a,b){if(!a||isNaN(a))return"";var c="",d=Math.ceil(a/60);if("bustime"===b)var e=d%10,f=parseInt(d/10,10),d=0!==e?5<e?10*++f:f?10*f:5:d;e=parseInt(d/1440,10);d%=1440;f=parseInt(d/60,10);d%=60;1<=e&&(c+=e+"\\u5929");1<=f&&(c+=f+"\\u5c0f\\u65f6");if(1<=d&&(!b||!("nav"===b&&1<=e)))c+=d+"\\u5206\\u949f";return c}U(cg,{clearResults:cg.Qe});x.extend(fe.prototype,{Sd:function(){for(var a=0,b=this.Oa.length;a<b;a++){var c=this.Oa[a];this[c.method].apply(this,c.arguments)}delete this.Oa;var d=this;this.k.ja.map&&this.k.ja.map.addEventListener("onpoiselected",function(a){d.lF(a)})},QA:function(a,b){function c(a){var a=a.split("$$"),b=a[0],c=p;/[0-2]/.test(b)&&7===a.length&&(c=a[+b+1]);return c}var d=this;this.Ng(this.zd,function(e){e={qt:d.vd,c:e,sn:a,p2:b,sy:d.k.ad||0,ext:1};4===e.sy&&(e.f="[0,2,4,7,5,8,9,10,11]");var f=c(a),g=c(b);Pd.fb(function(a, b){d.Lf(a,b)},e,{start:f,end:g})})},search:function(a,b){if(ee.prototype.search.call(this,a,b)===o){var c=this;this.Ng(this.zd,function(d){d||(this.sb(5),this.Ra(X.Tc));var e;"object"===typeof a&&"string"===typeof b||"string"===typeof a&&"object"===typeof b?"string"===typeof a?e={qt:"bse",c:d,isSingle:o,wd:a,en:c.bf(b),sy:c.k.ad||0,ex:1}:"string"===typeof b&&(e={qt:"bse",c:d,isSingle:o,wd:b,sn:c.bf(a),sy:c.k.ad||0,ex:1}):e={qt:c.vd,c:d,sn:c.bf(a),en:c.bf(b),sy:c.k.ad||0,ex:1};4===e.sy&&(e.f="[0,2,4,7,5,8,9,10,11]"); Pd.fb(function(a,b){c.Lf(a,b)},e,{start:a,end:b,FH:"search"})})}},lF:function(a){if(a.sType===this.vd){a=a.paramInfo;a.qt=this.vd;var b=this;a.sy=b.k.ad||0;var c={start:a.sq,end:a.eq,FH:"preciseSearch"};this.k.fd&&(c.VN=z.Dp+"mobile/webapp/interface/wiseBus/",c.Ss=o);Pd.fb(function(a){b.Lf(a,c)},a,c)}},Lf:function(a,b){var c=this.k.ja.map;this.Qe();this.Ga=a;var d=a.result;this.fa=b;if(0!==d.error||d.type!==this.Ou||!a.content)23===d.type&&this.k.ja.map?(c=new ke(a,{ja:this.k.ja,Ky:this.vd}),d=K("div", {style:"font:12px "+F.fontFamily+";background:#fff"}),d.innerHTML=c.va(),this.k.ja.Ha?(this.k.ja.Ha.appendChild(d),c.ra()):c.kP(),c.jC()):(this.ka=new Zh({city:a.current_city.name,Rt:[],ad:d.sy,xO:j,jL:j}),this.sb(3),this.Ra(X.Tc,this.ka));else if(this.k.fd&&"search"===b.FH){var e=new M("onpoiselected"),f={};f.qt=this.vd;f.sy=this.k.ad||0;f.sq=b.start;f.eq=b.end;f.sn=d.sn?d.sn:this.bf(d.start.wd);f.en=d.en?d.en:this.bf(d.end.wd);f.c=d.c;e.paramInfo=f;e.sType=this.vd;c.dispatchEvent(e)}else this.Ll(), this.Ml(),this._selectPlan(0)},FS:function(a,b){var c=Sd;0===b&&(c=0<a?2:1);return c},Ll:function(){var a=this.Ga.result,b=this.Ga.content,c=this.Ga.current_city,d={},e={};if("object"===typeof this.fa.start&&!(this.fa.start instanceof N||this.fa.start instanceof H))x.extend(d,this.fa.start);else{d.title=a.start.wd||"\\u8d77\\u70b9";d.uid=a.start.uid;d.url=X.Sh(d.uid,c.code);if(this.k.fd){var f=a.start.pt.split(",");d.point=T.zb(new H(parseFloat(f[0]),parseFloat(f[1])))}else d.point=Q.eb(a.start.pt, o).point;d.city=c.name}"object"===typeof this.fa.end&&!(this.fa.end instanceof N||this.fa.end instanceof H)?x.extend(e,this.fa.end):(e.title=a.end.wd||"\\u7ec8\\u70b9",e.uid=a.end.uid,e.url=X.Sh(e.uid,c.code),this.k.fd?(f=a.end.pt.split(","),e.point=T.zb(new H(parseFloat(f[0]),parseFloat(f[1])))):e.point=Q.eb(a.end.pt,o).point,e.city=c.name);var f=[],g=0;this.Iq=[];for(var i=0;i<b.length&&!(g>this.k.Lk-1);i++)for(var k=0,l=b[i]&&b[i].stops&&b[i].stops.length;k<l&&!(g>this.k.Lk-1);k++){this.Iq[g]=[]; for(var m=b[i].stops[k],n=b[i].lines[k],s=0,u=0,w=n.length;u<w;u++)"object"===typeof n[u]&&s++;for(var s=n[s+1],u=[],w=[],y=0,B="<table class=\'trans-plan-content\'>",A=0;A<m.length-1&&n[A].geo;A++){var E=m[A].getOn,E={title:E.name,uid:E.uid,url:X.Sh(E.uid,c.code),city:c.name,point:Q.eb(E.geo,o).point},C=m[A+1].getOff,C={title:C.name,uid:C.uid,url:X.Sh(C.uid,c.code),city:c.name,point:Q.eb(C.geo,o).point},D=[];if(0===A)0<m[A].walk.distance&&m[A].walk.geo&&(D=Q.eb(m[A].walk.geo,o).ia.concat(E.point)); else if(0<m[A].walk.distance&&m[A].walk.geo)var D=Q.eb(m[A].getOff.geo,o).point,J=Q.eb(m[A].getOn.geo,o).point,D=[D].concat(Q.eb(m[A].walk.geo,o).ia).concat(J);w.push(new gi({nd:m[A].walk.distance,ia:D.slice(0),Jy:Qd,index:A,eF:i}));y+=m[A].walk.distance;A===m.length-2&&(0<m[A+1].walk.distance&&m[A+1].walk.geo&&(D=[C.point].concat(Q.eb(m[A+1].walk.geo,o).ia)),w.push(new gi({nd:m[A+1].walk.distance,ia:D.slice(0),Jy:Qd,index:A+1,eF:i})),y+=m[A+1].walk.distance);D=Q.eb(n[A].geo,o);J=[];if(this.k.fd&& n[A].link_color&&0<n[A].link_color.length)for(var O=0,P=0,R=n[A].link_color,aa=R.length;O<aa;O++){var ba=R[O],La=ba.status,Ra=D.ia.slice(P,P+ba.geo_cnt+1);J.push({ia:Ra,status:La});P+=ba.geo_cnt}u.push(new ii({title:n[A].name,uid:n[A].uid,nd:n[A].distance,ia:D.ia,status:J,G_:[E,C],type:this.rS(n[A].type),iZ:n[A].station_num}));J=D.$a;D=J.xe();J=J.pf();D=[D,J];this.Iq[g].push(D[0],D[1]);y+=n[A].distance;m[A].walk.distance&&(B+="<tr><td><span class=\'navtrans-bus-icon walk\'></span><div class=\'navtrans-bus-desc\'>\\u6b65\\u884c\\u7ea6"+ bi(m[A].walk.distance)+"\\uff0c\\u5230\\u8fbe<span class=\'navtrans-busstation\'>"+E.title+"</span></div></td></tr>");B+="<tr><td><span class=\'navtrans-bus-icon bus\'></span><div class=\'navtrans-bus-desc\'>\\u4e58\\u5750<span class=\'navtrans-busstation\'>"+this.AU(n[A].name)+"</span>\\uff0c\\u7ecf\\u8fc7"+n[A].station_num+"\\u7ad9\\uff0c\\u5230\\u8fbe<span class=\'navtrans-busstation\'>"+C.title+"</span></div></td></tr>";A<m.length-2?B+="":m[A+1].walk.distance&&(B+="<tr><td><span class=\'navtrans-bus-icon walk\'></span><div class=\'navtrans-bus-desc\'>\\u6b65\\u884c\\u7ea6"+ bi(m[A+1].walk.distance)+"\\uff0c\\u5230\\u8fbe<span class=\'navtrans-busstation\'>"+m[A+1].getOn.name+"</span></div></td></tr>")}B+="</table>";if(0===y)break;f.push(new ei({vF:w,nd:y,duration:s,RY:u,description:B}));g++}b=z.oc+"direction?"+Gb({region:c.name,origin:this.Rh(this.fa.start,this.fa.start.title?this.fa.start.title:this.fa.start),destination:this.Rh(this.fa.end,this.fa.end.title?this.fa.end.title:this.fa.end)})+"&output=html&mode=transit&src=baidu_map_jsapi";this.ka=new Zh({city:c.name,Rt:f, start:d,end:e,url:b,ad:a.sy});this.sb(0);this.Ra(X.Tc,this.ka)},bU:function(a){var b=this.k.ja.map,c=[],d=this;if(b){var e=this.ka.rf(a);if(e){var f=this.ka.wj(),g=this.ka.kh(),i=W.Eo(b,f.point,f.title,mi);f.marker=i;i.addEventListener("click",function(){d._select(0)});this.wa.push(i);i=W.Eo(b,g.point,g.title,ni);g.marker=i;this.wa.push(i);i.addEventListener("click",function(){d._selectLast()});this.Iq[a].push(f.point,g.point);for(var k=0,i=e.Gx();k<i;k++){var l=e.$D(k),m=W.Fo(b,l.ve()),n=[];if(this.k.fd&& 0<l.Cd.length){for(var s=0,u=l.Cd.length;s<u;s++){var w=l.Cd[s];w.status&&(w=W.XJ(b,w.ia,w.status),n.push(w),this.wa.push(w))}l.s1=n}l.Yi=m;this.wa.push(m);m=l.XD();c.push(m);var y=W.ZJ(b,m.point,l.type,m.title);m.marker=y;this.wa.push(y);m=l.WD();c.push(m);var B=W.ZJ(b,m.point,l.type,m.title);m.marker=B;(function(){var a=k;y.addEventListener("click",function(){d._select(2*(a+1)-1)});B.addEventListener("click",function(){d._select(2*(a+1))})})();this.wa.push(B);l=e.mh(k);0<l.Ue(q)&&(m=W.Zl(b,l.ve(), l.lp()),l.Yi=m,this.wa.push(m))}l=e.mh(k);m=W.Zl(b,l.ve(),l.lp());l.Yi=m;this.wa.push(m);d=this;this.k.ja.ah&&b.Eh(this.Iq[a],{margins:[30,30,30,30]});this.Ra(X.Ju,e.Wi,e.ik);this.Ra(X.kq,[f,g],c)}}},Ml:function(){if(this.k.ja.Ha&&this.k.ja.Ha.appendChild&&this.ka&&0<this.ka.Hx()){for(var a=K("div",{style:"font:12px "+F.fontFamily+";background:#fff"}),b=ee.GH(this.ka.kh().title,"\\u4e58\\u516c\\u5171\\u4ea4\\u901a\\u5de5\\u5177"),c=this.IH(this.ka.wj().title,\'Instance("\'+this.ba+\'")["_select"](0)\',0),d= this.IH(this.ka.kh().title,\'Instance("\'+this.ba+\'")["_selectLast"]()\',1),e=["<table style=\'font:12px "+F.fontFamily+";border-collapse:collapse;width:100%;\' cellpadding=\'0\' cellspacing=\'0\' border=\'0\'>"],f=0,g=this.ka.Hx();f<g;f++){var i=this.ka.rf(f),k=i.Ue().replace(/(\\d+(?:.\\d+)?)/,"$1 "),l=i.bt().replace(/(\\d+)/,"$1 "),m=i.eY();bg="";var n="<p style=\'margin:0px 0px 5px 0px;font-size:14px;color: #36c;\'>"+i.zX()+"</p>",k="<p style=\'margin:5px 0px;font-size:12px;\'>"+k+"  &nbsp;|&nbsp;  "+l+"  &nbsp;|&nbsp; \\u6b65\\u884c"+ m+"</p>";e.push("<tr class=\'tranroute-plan-list\' style=\\"cursor:pointer"+bg+\'" onclick=\\\'Instance("\'+this.ba+\'")._selectPlan(\'+f+")\'>");e.push("<td style=\'vertical-align:top;line-height:18px\' ><div style=\'margin:3px 0px;border:1px solid #e4e6e7;\'><div class=\'trans-title\' style=\'padding: 5px 10px;\'>"+n+k+"</div><div class=\'trans_plan_desc\' style=\'padding:0px 8px;margin:0px;display:none;position:relative;\'>"+c+i.jh()+d+"</div></div></td>");e.push("</tr>")}e.push("</table>");c="<div style=\'border-bottom:1px solid #ccc;margin-bottom:10px;color:#7777cc;background:#e5ecf9;overflow:hidden;padding:2px;text-align:right\'>"; this.ka.moreResultsUrl&&(c+="<a style=\'color:#7777cc\' href=\'"+this.ka.moreResultsUrl+"\' target=\'_blank\'>\\u5230\\u767e\\u5ea6\\u5730\\u56fe\\u67e5\\u770b&#187;</a>");a.innerHTML=b+e.join("")+(c+"&nbsp;</div>");this.k.ja.Ha.appendChild(a);this.Ra(X.Ku,a)}},_select:function(a,b){var c=this.k.ja.map;if(c){var b=b||window.event,d=this.ka.rf(this.lb);if(d){var e=this,f=2*d.Gx();if(0===a||a===f+1){var g=0===a?this.ka.wj():this.ka.kh(),i=W.$w({content:"<b>"+g.title+"</b>",total:f,dx:a,qy:function(a){e._select(a)}}); i.addEventListener("open",function(){e.Ra(X.Hn,g,W.ct(c))});var k=0===a?0:1,e=this;c.B.vm?Qe.vp(i,c.getCurrentCity().code,{panoInstance:c.P,lngLat:g.point,titleTip:g.title,type:"busline",beforeDomId:"trans_nav"},function(){e.wa[k].Mb(i)}):e.wa[k].Mb(i)}else{var d=d.$D(Math.floor((a+1)/2)-1),l,m=d.mp();1===a%2?(l=d.XD(),d=m+"<b>"+l.title+"\\u7ad9\\u4e0a\\u8f66</b>"):(l=d.WD(),d=m+"<b>"+l.title+"\\u7ad9\\u4e0b\\u8f66</b>");i=W.$w({content:d,total:f,dx:a,qy:function(a){e._select(a)}});i.addEventListener("open", function(){e.Ra(X.Hn,l,W.ct(c))});e=this;c.B.vm?Qe.vp(i,c.getCurrentCity().code,{panoInstance:c.P,lngLat:l.point,titleTip:l.title,type:"busline",beforeDomId:"trans_nav"},function(){l.marker.Mb(i)}):l.marker.Mb(i)}na(b)}}},_selectLast:function(a){a=a||window.event;if(this.ka&&-1<this.lb){var b=this.ka.rf(this.lb);if(!b)return;this._select(2*b.Gx()+1)}na(a)},_selectPlan:function(a){if(this.ka||this.v1.rf(a)){this.ka.rf(a);var b=this.k.ja.map;b&&(b.Xc(),this.Pj(),this.bU(a));if(this.k.ja.Ha){var c=this.k.ja.Ha.getElementsByTagName("table")[0]; if(!c)return;for(var b=x.getElementsByClassName(c,"tranroute-plan-list"),c=x.getElementsByClassName(c,"trans_plan_desc"),d=0;d<c.length;d++)d!==a&&(c[d].style.display="none");for(c=0;c<b.length;c++)x.Tb(b[c],"expand");c=x.getElementsByClassName(b[a],"trans_plan_desc")[0];"none"===c.style.display?(c.style.display="block",x.Ta(b[a],"expand")):c.style.display="none"}this.lb=a}},Pj:function(){for(var a=0;a<this.wa.length;a++)this.wa[a]&&this.wa[a].mB&&(this.wa[a].mB.remove(),this.wa[a].mB=p),this.wa[a]&& this.wa[a].remove(),this.wa[a]=p;this.wa.length=0},rS:function(a){return fe.CP[a]},IH:function(a,b,c){var d="";0===c&&(d+="padding-top:5px;");var e="nav-ed";0===c&&(e="nav-st");c=["<div style=\'"+d+"\'><div style=\'cursor:pointer;padding:2px 0 2px 0px;line-height:15px\'"];c.push("onclick=\'"+b+"\'>");c.push("<span class=\'navtrans-navlist-icon "+e+"\'></span>");c.push("<div style=\'overflow:hidden;line-height:20px;\'>"+a);c.push("</div></div></div>");return c.join("")}});ge=fe.prototype;U(ge,{_internalSearch:ge.QA});he.FP=20;he.zP=50;he.yP=10; x.extend(he.prototype,{xE:function(){this.aa={Jp:[],Jb:[],Hi:[],eh:[],me:p,rd:p,bD:q,Ow:p,Mo:p,xM:q,bx:p,cD:1,aD:1,rK:"\\u8d77\\u70b9",qK:"\\u7ec8\\u70b9",ny:q,Ds:[]}},Sd:function(){this.xE();for(var a=0,b=this.Oa.length;a<b;a++){var c=this.Oa[a];this[c.method].apply(this,c.arguments)}delete this.Oa;var d=this;this.k.ja.map&&this.k.ja.map.addEventListener("onpoiselected",function(a){d.lF(a)})},search:function(a,b,c){this.aa.xM=q;var c=c||{},d=c.waypoints;"[object Array]"==Object.prototype.toString.call(d)||(d= []);this.iP=d;if(ee.prototype.search.call(this,a,b)===o){var e=this;this.Ng(this.zd,function(f){var f=f||1,g;if(("object"===typeof a&&"string"===typeof b||"string"===typeof a&&"object"===typeof b)&&0===d.length&&!e.k.fd)"string"===typeof a?g={qt:"nse",c:f,isSingle:o,wd:a,en:e.bf(b),sy:e.k.ad||0}:"string"===typeof b&&(g={qt:"nse",c:f,isSingle:o,wd:b,sn:e.bf(a),sy:e.k.ad||0}),this.vd=e.k.fd?e.vd:"nse",f={start:a,end:b,Ss:e.k.fd};else{var i=e.bf(a);en="";if(0<d.length){for(var k=0;k<d.length;k++)en+= e.Nx(d[k])+"+to:";en+=e.bf(b)}else en=e.bf(b);g={qt:e.vd,c:f,sn:i,en:en,sy:e.k.ad||0};f={start:i,end:en,Ss:e.k.fd}}0<d.length&&(f.XO=o);c.startCity&&(g.sc=c.startCity);if(c.endCity){i="";if(0<d.length){for(k=0;k<d.length;k++)i+=c.endCity+"+to:";i+=c.endCity}else i=c.endCity;g.ec=i}e.k.fd&&(g.route_traffic=1,g.version=4,g.mrs=0<e.iP.length?0:1);Pd.fb(function(a,b){e.Lf(a,b)},g,f)})}},hA:function(a,b){var c=this;c.aa.xM=o;c.Ng(c.zd,function(d){for(var d=d||1,e=T.yb(c.aa.Jb[0]),e="1$$$$"+e.lng+","+e.lat+ "$$$$",f=c.aa.cD||d,g="",i="",k=1,l=c.aa.Jb.length;k<l;k++){var m=c.aa.Jb[k];k===l-1?(g+=c.bf(m),i+=c.aa.aD||d):(g=m.Aj?g+(c.Nx(m)+"+to:"):g+(c.bf(m)+"+to:"),i+="0 +to:")}d={qt:c.vd,c:d,drag:1,sc:f,ec:i,sn:e,en:g,sy:c.k.ad||0};c.k.fd&&(d.route_traffic=1,d.version=4,d.mrs=0);e={start:a,end:b,Ss:c.k.fd};x.extend(e,{XO:o});Pd.fb(function(a,b){c.Lf(a,b)},d,e)})},lF:function(a){var b=this;if(a.sType===this.vd){a=a.paramInfo;a.qt=this.vd;var b=this,c={start:a.sq,end:a.eq,Ss:b.k.fd};a.sy=b.k.ad||0;b.k.fd&& (a.route_traffic=1,a.version=4,a.mrs=0<b.iP.length?0:1);Pd.fb(function(a){b.Lf(a,c)},a,c)}},Lf:function(a,b){this.Qe();this.Ga=a;var c=a.result;this.fa=b;if(0!==c.error||c.type!==this.Ou)if(23===c.type||19===c.type){var c=new ke(a,{ja:this.k.ja,Ky:this.vd}),d=K("div",{style:"font:12px "+F.fontFamily+";background:#fff"});d.innerHTML=c.va(b);this.k.ja.Ha?(this.k.ja.Ha.appendChild(d),c.ra()):c.kP()}else this.ka=this.jv({city:a.current_city.name,Rt:[],ad:c.sy,xO:j,jL:j}),this.sb(3),this.Ra(X.Tc,this.ka); else this.k.fd?this.WT():this.Ll(),this.aU(),this.Ml()},FS:function(a,b){var c=Sd;0===b&&(c=0<a?2:1);return c},QB:function(){this.aa.rd&&this.aa.rd.WC();for(var a=0,b=this.aa.eh.length;a<b;a++){var c=this.aa.eh[a];c instanceof V&&c.WC()}},WT:function(){var a=this.Ga.result,b=this.Ga.content,c=this.Ga.current_city,d=a.waypoints,e=b.taxis&&b.taxis[0]&&b.taxis[0].total_price||0,f=[],g=[],i=0,k=0,l=b.routes[0].legs,m=b.steps,n=b.stepts,s=[],u=[];this.Ol=[];var w=this.aa.Hi.slice(0);this.aa.Hi.length= 0;var y={},B={},A=[],b=[],E=[],C=[];if("object"===typeof this.fa.start&&!(this.fa.start instanceof N||this.fa.start instanceof H))x.extend(y,this.fa.start);else{y.title=a.start.wd||"\\u8d77\\u70b9";y.uid=a.start.uid;y.url=X.Sh(y.uid,a.start_city.code);var D=a.start.pt.split(",");y.point=T.zb(new H(parseFloat(D[0]),parseFloat(D[1])));y.city=a.start_city.cname}this.aa.cD=a.start_city.code;if("object"===typeof this.fa.end&&!(this.fa.end instanceof N||this.fa.end instanceof H))x.extend(B,this.fa.end);else{var J, D=a.end[a.end.length-1];J=a.end_city[a.end_city.length-1];this.aa.aD=J.code;B.title=D.wd||"\\u7ec8\\u70b9";B.uid=D.uid;"null"===B.uid&&(B.uid="");B.url=X.Sh(D.uid,J.code);D=D.pt.split(",");B.point=T.zb(new H(parseFloat(D[0]),parseFloat(D[1])));B.city=J.cname}J=D=0;for(var O=l.length;J<O;J++){var P=l[J],i=i+P.distance,k=k+P.duration;f.push(P.distance);g.push(P.duration);for(var R=[],aa=[],ba=[],La=[],P=P.stepis,Ra=0,Ua=P.length;Ra<Ua;Ra++){for(var Ca=P[Ra],uc=Ca.s,Ca=Ca.n,Ce=m.slice(uc,Ca+uc),Ef=n.slice(uc, Ca+uc),md=0;md<Ca;md++){for(var Qb=Ce[md],vc=Ef[md],De=vc.end,Ee=vc.status,Uc=Q.eb(Qb.path,o).ia,nd=0,Fe=[],od=0,Ff=De.length;od<Ff;od++){var Ge=De[od];Fe[od]=Uc.slice(nd,nd+Ge+1);nd+=Ge}this.Ol[D]=Uc;aa=aa.concat(Uc);ba.push(Uc);La.push(Ee);Qb.Ay=Uc;Qb.R4=vc;Qb.cG=Ee;Qb.d0=Fe;D++}R=R.concat(Ce);u=u.concat(n.slice(uc,Ca+uc+1))}s.push(R);E.push(ba);C.push(La);b.push(aa)}l=[];J=0;for(g=b.length;J<g;J++)m=new gi({Fj:s[J],nd:f[J],index:J,ia:E[J],cG:C[J],Jy:this.Pu}),l.push(m);J=new ai({vF:l,nd:i,duration:k}); f="";i={};E=p;E=k="string";s=this.k.ja.map;if(this.fa.start instanceof N||this.fa.start instanceof H)k="point";if(this.fa.end instanceof N||this.fa.end instanceof H)E="point";"point"===k&&"string"===E||"string"===k&&"point"===E?(E="nse",s.Id(),x.extend(i,{region:c.name,zoom:s.ga()}),"string"===k?(i.origin=this.fa.start,i.destination=this.Rh(this.fa.end,this.fa.end.title?this.fa.end.title:this.fa.end)):(i.destination=this.fa.end,i.origin=this.Rh(this.fa.start,this.fa.start.title?this.fa.start.title: this.fa.start))):(E=Ud,i.region=c.name,i.origin_region=a.start_city.cname,i.destination_region=a.end_city[0].cname,i.origin=this.Rh(this.fa.start,this.fa.start.title?this.fa.start.title:this.fa.start),i.destination=this.Rh(this.fa.end,this.fa.end.title?this.fa.end.title:this.fa.end));E!==p&&(f=z.oc+"direction?"+Gb(i)+"&output=html&mode=driving&src=baidu_map_jsapi");this.ka=this.jv({city:c.name,Rt:[J],start:y,end:B,url:f,ad:a.sy,EO:e});this.aa.Jb.length=0;this.aa.Jp.length=0;c=1;for(J=0;J<d.length;J++)e= d[J],f=(e.pt?e.pt:a.end[J].pt).split(","),f=T.zb(new H(parseFloat(f[0]),parseFloat(f[1]))),f.Aj=e.if_wp?e.if_wp:a.end[J].pt,A.push(f),this.aa.Hi.push({title:e.wd?e.wd:w[J]&&w[J].title?w[J].title:"\\u672a\\u77e5\\u8def\\u6bb5",curNo:c,point:f}),c++;this.aa.Jb.push(y.point);J=0;for(g=A.length;J<g;J++)this.aa.Jb.push(A[J]);this.aa.Jb.push(B.point);J=0;for(g=b.length;J<g;J++)a=b[J],a.Xk=J,a.pj=J+1,this.aa.Jp.push(a);this.sb(0);this.Ra(X.Tc,this.ka)},Ll:function(){var a=this.Ga.result,b=this.Ga.content,c= this.Ga.current_city,d=b.kps,e=b.rss,f=a.waypoints,g={},i={};"object"===typeof this.fa.start&&!(this.fa.start instanceof N||this.fa.start instanceof H)?x.extend(g,this.fa.start):(g.title=a.start.wd||"\\u8d77\\u70b9",g.uid=a.start.uid,g.url=X.Sh(g.uid,a.start_city.code),g.point=Q.eb(a.start.pt,o).point,g.city=a.start_city.cname);this.aa.cD=a.start_city.code;if("object"===typeof this.fa.end&&!(this.fa.end instanceof N||this.fa.end instanceof H))x.extend(i,this.fa.end);else{var k,l;k=a.end[a.end.length- 1];l=a.end_city[a.end_city.length-1];this.aa.aD=l.code;i.title=k.wd||"\\u7ec8\\u70b9";i.uid=k.uid;"null"===i.uid&&(i.uid="");i.url=X.Sh(k.uid,l.code);i.point=Q.eb(k.pt,o).point;i.city=l.cname}var m=[],n=[],s=[],u=0,w=[];this.Ol=[];l=[];k=[];var y=[],B=0;this.aa.Hi.length=0;for(var A=1,E=0,C=d.length-1;E<C;E++){var D=d[E],J=d[E+1],O=e[E],P=e[E-1]||{},R=e[E+1],aa=Q.eb(D.pt,o).point,ba=Q.eb(O.g,o);ba&&(y=y.concat(ba.ia));u+=R.d;3===D.rt?(1===f[A-1].if_wp&&(aa.Aj=1),l.push(aa),k.push(y.slice(0)),y=[],m.push(n.slice(0)), n=[],s.push(u),u=0,this.aa.Hi.push({title:P.n||R.n||"\\u672a\\u77e5\\u8def\\u6bb5",curNo:A,point:aa}),A++):(n.push(new ki({point:aa,index:n.length,description:this.jS(D,O,R,E,C,P,J),nd:R.d})),ba&&(this.Ol[B]=1<E?[w[w.length-1]].concat(ba.ia):ba.ia,w=w.concat(ba.ia)),B++)}0<y.length&&k.push(y);0<n.length&&m.push(n);0<u&&s.push(u);d=[];E=0;for(C=k.length;E<C;E++)e=new gi({Fj:m[E],nd:s[E],index:E,ia:k[E],Jy:this.Pu}),d.push(e);E=b.time;this.vd===Vd&&(E=Math.round(b.dis/1.35));b=new ai({vF:d,nd:b.dis,duration:E, GW:this.aa.Hi});E="";C={};f=p;f=d="string";e=this.k.ja.map;if(this.fa.start instanceof N||this.fa.start instanceof H)d="point";if(this.fa.end instanceof N||this.fa.end instanceof H)f="point";"point"===d&&"string"===f||"string"===d&&"point"===f?(f="nse",e.Id(),x.extend(C,{region:c.name,zoom:e.ga()}),"string"===d?(C.origin=this.fa.start,C.destination=this.Rh(this.fa.end,this.fa.end.title?this.fa.end.title:this.fa.end)):(C.destination=this.fa.end,C.origin=this.Rh(this.fa.start,this.fa.start.title?this.fa.start.title: this.fa.start))):(f=Ud,C.region=c.name,C.origin_region=a.start_city.cname,C.destination_region=a.end_city[0].cname,C.origin=this.Rh(this.fa.start,this.fa.start.title?this.fa.start.title:this.fa.start),C.destination=this.Rh(this.fa.end,this.fa.end.title?this.fa.end.title:this.fa.end));f!==p&&(E=z.oc+"direction?"+Gb(C)+"&output=html&mode=driving&src=baidu_map_jsapi");this.ka=this.jv({city:c.name,Rt:[b],start:g,end:i,url:E,ad:a.sy,EO:this.HS()});this.aa.Jb.length=0;this.aa.Jp.length=0;this.aa.Jb.push(g.point); E=0;for(C=l.length;E<C;E++)this.aa.Jb.push(l[E]);this.aa.Jb.push(i.point);E=0;for(C=k.length;E<C;E++)a=k[E],a.Xk=E,a.pj=E+1,this.aa.Jp.push(a);this.sb(0);this.Ra(X.Tc,this.ka)},KH:function(){for(var a=0,b=this.ka.rf(0),c=0,d=b.ht();c<d;c++)var e=b.mh(c),a=a+e.Ix();return a},ir:function(a){for(var b=0,c=this.ka.rf(0),d=0,e=c.ht();d<e;d++)for(var f=c.mh(d),g=0,i=f.Ix();g<i;g++){var k=f.RL(g);if(b===a)return k;b++}},jS:function(a,b,c,d,e,f,g){var i="",i=parseInt(b.d,10),k=b.poi;k&&(i-=k.pd);var i=bi(i), f=this.BA(f.t,f.n),k=this.BA(b.t,b.n),l=this.BA(b.t,c.n),m=this.QH(a.dw)||"",m=a.dr?m+"<span>"+a.dr+"</span>\\uff0c":"";3===g.rt&&(m+="\\u5230\\u8fbe<span>"+this.AA(g.rt)+"</span>\\uff0c");c=k===l?"":this.DS(c.t,c.n)+"<span>"+l+"</span>";g=this.bI(a.ett||a.extt||a.tt);i=g+"<div class=\'navtrans-navlist-content\'>"+((""!==k&&f===k?"\\u7ee7\\u7eed":"")+this.ES(b.t,b.n))+k+this.AA(a.rt)+i+"\\uff0c"+this.AS(b)+this.IS(a)+m;0===d?i=g+"<div class=\'navtrans-navlist-content\'>\\u4ece\\u8d77\\u70b9\\u5411"+this.tv(a.ett|| a.extt||a.tt)+"\\u51fa\\u53d1</div>":0<d&&d<e-1?((a=this.tv(a.ett||a.extt||a.tt))||(a=this.tv(1)),i=i+a+c+"</div>"):i+="\\u5230\\u8fbe\\u7ec8\\u70b9</div>";return i},ZS:function(a,b,c){if(b&&c&&0<c.length)for(var d=0,e=c.length;d<e;d++){var f=a.Cc(c[d]);if(W.mX(b,f)<=he.FP)return o}return q},aU:function(){this.k.ja.map&&this.ka&&(this.fU(),this.cU())},cU:function(){for(var a=this.k.ja.map,b=this.ka.rf(0),c=b.mh(0),d=this.ka.wj(),e=this.ka.kh(),f=this,g=this.aa.Jb.length,i=[],k=[],l,m=0,n=this.aa.Jp.length;m< n;m++){var s=this.aa.Jp[m];l=W.Zl(a,s,c.lp());b.ik[m].Yi=l;l.Xk=s.Xk;l.pj=s.pj;s=l.Id();i.push(s.xe());i.push(s.pf());this.jA&&g<he.yP+2&&(l.addEventListener("mousemove",function(b){f.aa.ny?f.aa.rd&&f.aa.rd.U():(f.aa.bx=this,f.aa.rd?f.ZS(a,b.pixel,f.aa.Jb)?f.aa.rd.U():(f.aa.rd.show(),f.aa.rd.ta(b.point),f.aa.me.bd("\\u62d6\\u52a8\\u4ee5\\u66f4\\u6539\\u8def\\u7ebf"),f.aa.me.show(),f.aa.rd.mn(f.aa.me)):(f.aa.rd=W.UJ(a,b.point),f.aa.rd.Fb(),f.aa.rd.addEventListener("dragging",function(){f.bJ(this,a,f.aa.bx.Xk, f.aa.bx.pj)}),f.aa.rd.addEventListener("dragend",function(){var a=f.aa.Ow,b=a.name,c=f.aa.bx.pj;a.Aj=p;f.aa.Jb.splice(c,0,a);f.aa.Hi.splice(c,0,{title:b?b:"\\u672a\\u77e5\\u8def\\u6bb5",curNo:c,point:a});this.ta(a);f.QB();f.hA(d,e)}),f.aa.me||(f.aa.me=W.IK()),a.Ja(f.aa.rd)))}),l.addEventListener("mouseout",function(){f.aa.rd&&f.aa.rd.U()}));f.aa.eh.push(l);if(this.k.fd){c=b.mh(m);l=0;for(s=c.$r.length;l<s;l++)for(var u=c.$r[l],w=u.d0,u=u.cG,y=0,B=w.length;y<B;y++){if(u[y])var A=W.XJ(a,w[y],u[y]);k.push(A); f.aa.eh.push(A)}c.E1=k}}this.k.ja.ah&&a.Eh(i,{margins:[30,30,30,30]});this.Ra(X.Ju,b.ik)},fU:function(){var a=this.k.ja.map;this.ka.rf(0);for(var b=this.ka.wj(),c=this.ka.kh(),d=this,e=0,f=0,g=this.aa.Jb.length;f<g;f++){var i=this.aa.Jb[f];if(0===f)i=W.Eo(a,i,b.title,mi),b.marker=i,i.addEventListener("click",function(){d._select(0)}),this.wa.push(i);else if(f===this.aa.Jb.length-1)i=W.Eo(a,i,c.title,ni),c.marker=i,i.addEventListener("click",function(){d._select(d.KH()+1)}),this.wa.push(i);else{i.Aj? (i=W.$J(a,i,e),e++,i.Aj=1):i=W.UJ(a,i);this.aa.Hi[f-1].Tm=i;var k=new Oc;k.Dw(new Rc("\\u5220\\u9664\\u8be5\\u70b9",function(a,b,c){d._delVia(c.fx)},{width:60}));i.Do(k);d.aa.Ds.push(k)}i.fx=f;this.jA&&(i.Fb(),i.addEventListener("mouseover",function(){d.aa.ny=o;d.aa.me?(d.aa.me.bd("\\u62d6\\u52a8\\u4ee5\\u66f4\\u6539\\u8def\\u7ebf"),d.aa.me.show()):d.aa.me=W.IK();this.mn(d.aa.me)}),i.addEventListener("mouseout",function(){this.ZD()&&this.ZD().U();d.aa.ny=q}),i.addEventListener("dragging",function(){d.bJ(this, a)}),i.addEventListener("dragend",function(){var a=d.aa.Ow,e=this.fx;this.Aj&&(a.Aj=1);d.aa.Jb[e]=a;this.ta(a);var a=d.aa.Jb[0],f=d.aa.Jb[d.aa.Jb.length-1];0===e&&(b.point=a,b.title=d.aa.rK);e===d.aa.Jb.length-1&&(c.point=f,c.title=d.aa.qK);d.QB();d.hA(b,c)}));d.aa.eh.push(i)}e=[b];e=e.concat(this.aa.Hi);e=e.concat([c]);this.Ra(X.kq,e)},bJ:function(a,b,c,d){var e=this;if(e.aa.bD!==o){e.aa.bD=o;setTimeout(function(){e.aa.bD=q},he.zP);var f;f=T.yb(a.ha());var g=b.ga(),i=a.fx,k=e.k.ad;if("undefiend"!== typeof c&&"undefined"!==typeof d){var l=e.aa.Jb[c],l=T.yb(l),i=e.aa.Jb[d],i=T.yb(i);f={qt:"drag",pt:f.lng+","+f.lat,sn:l.lng+","+l.lat,en:i.lng+","+i.lat,r:5E3,st:1,et:1,sy:k,l:g}}else 0===i?(i=e.aa.Jb[i+1],i=T.yb(i),f={qt:"drag",pt:f.lng+","+f.lat,sn:"",en:i.lng+","+i.lat,r:5E3,st:1,et:1,sy:k,l:g}):i===this.aa.Jb.length-1?(l=e.aa.Jb[i-1],l=T.yb(l),f={qt:"drag",pt:f.lng+","+f.lat,sn:l.lng+","+l.lat,en:"",r:5E3,st:1,et:1,sy:k,l:g}):(l=e.aa.Jb[i-1],l=T.yb(l),i=e.aa.Jb[i+1],i=T.yb(i),f={qt:"drag",pt:f.lng+ ","+f.lat,sn:l.lng+","+l.lat,en:i.lng+","+i.lat,r:5E3,st:1,et:1,sy:k,l:g});Pd.fb(function(a,b){e.iU(a,b)},f,{lW:a,map:b,Xk:c,pj:d})}},iU:function(a,b){if(a&&a.content){this.aa.Ow=Q.eb(a.content.dragpt,o).point;var c,d=b.map,e=b.Xk,f=b.pj,g=b.lW.fx;"undefiend"!==typeof e&&"undefined"!==typeof f?c=Q.EN(a.content.geo).ia:0===g?(c=Q.eb(a.content.geo,o).ia,this.aa.rK=a.content.name?a.content.name:"\\u8d77\\u70b9"):g===this.aa.Jb.length-1?(c=Q.eb(a.content.geo,o).ia,this.aa.qK=a.content.name?a.content.name: "\\u7ec8\\u70b9"):c=Q.EN(a.content.geo).ia;c&&(this.RQ(g,d,e,f),this.aa.Mo?this.aa.Mo.le(c):(e=this.ka.rf(0).mh(0),this.aa.Mo=W.Zl(d,c,e.lp())));c=a.content.name?a.content.name:"\\u672a\\u77e5\\u8def\\u6bb5";this.aa.Ow.name=c;d="("+bi(a.content.dis)+")";this.aa.me&&this.aa.me.show();this.aa.me&&this.aa.me.bd(c+d)}},RQ:function(a,b,c,d){for(var e=0,f=this.aa.eh.length;e<f;e++){var g=this.aa.eh[e];if(g instanceof pd)if("undefiend"!==typeof c&&"undefined"!==typeof d){if(g.Xk===c&&g.pj===d){b.Ub(g);break}}else(g.Xk=== a||g.pj===a)&&b.Ub(g)}this.dg&&this.dg.U()},_select:function(a){var b=this.lb,c=this.k.ja;if(c.Ha){var d=c.Ha.getElementsByTagName("table"),d=d[d.length-1].getElementsByTagName("tr");0<=b-1&&d[b-1]&&(d[b-1].style.background="");0<=a-1&&d[a-1]&&(d[a-1].style.background="#f0f0f0")}var e=c.map;if(e){var b=this.ka.rf(0).mh(0),d=this.KH(),f=this;e.Xc();if(0===a||a===d+1){var g=0===a?this.ka.wj():this.ka.kh(),i=W.$w({content:"<b>"+g.title+"</b>",total:d,dx:a,qy:function(a){f._select(a)},kY:1===c.ot?q:o}); i.addEventListener("open",function(){f.Ra(X.Hn,g,W.ct(e))});i.addEventListener("close",function(){if(f.k.ja.Ha){var a=c.Ha.getElementsByTagName("table");if(a=a[a.length-1])a=a.getElementsByTagName("tr"),0<=f.lb-1&&a[f.lb-1]&&(a[f.lb-1].style.background="")}f.lb=-1});var k=0===a?0:1,f=this;e.B.vm?Qe.vp(i,e.getCurrentCity().code,{panoInstance:e.P,lngLat:g.point,titleTip:g.title,type:"busline",beforeDomId:"trans_nav"},function(){f.wa[k].Mb(i)}):f.wa[k].Mb(i);this.dg&&this.dg.U()}else{var l=c.ot;if(1=== l){var m=this.ir(a-1),i=W.$w({content:m.jh()?m.jh(q):m.instructions,total:d,dx:a,qy:function(a){f._select(a)}});i.addEventListener("open",function(){f.Ra(X.Hn,m,W.ct(e))});i.addEventListener("close",function(){if(f.k.ja.Ha){var a=c.Ha.getElementsByTagName("table");if(a=a[a.length-1])a=a.getElementsByTagName("tr"),0<=f.lb-1&&a[f.lb-1]&&(a[f.lb-1].style.background="")}f.lb=-1});var n=m.ha?m.ha():m.Ay[m.Ay.length-1],f=this;e.B.vm?Qe.vp(i,e.getCurrentCity().code,{panoInstance:e.P,lngLat:n,titleTip:m.jh? m.jh(q):m.instructions,type:"driving",beforeDomId:"trans_nav"},function(){e.Mb(i,n)}):e.Mb(i,n)}else if(2===l)if(1===a&&!this.k.fd)m=this.ir(0),e.Wf(m.ha?m.ha():m.Ay[m.Ay.length-1]),c.ah&&e.Oc(17),this.dg&&this.dg.U();else if(this.Ol[a-1]&&(this.dg?(this.dg.le(this.Ol[a-1]),this.dg.show()):this.dg=W.Zl(e,this.Ol[a-1],b.lp()+2),c.ah))b=e.lt(this.dg.Id()),17<b.zoom&&(b.zoom=17),e.Eh(b)}}this.lb=a},_toggle:function(){var a=this.k.ja;if(a.Ha){var b=x.getElementsByClassName(a.Ha,"navtrans-res");b&&0<b.length&& (b=b[0],b.style.display=b&&"none"===b.style.display?"":"none");if((a=x.getElementsByClassName(a.Ha,"navtrans-view"))&&0<a.length)a=a[0],x.K.V_(a)}},Pj:function(){var a=this.k.ja.map;if(a){for(var b=0,c=this.wa.length;b<c;b++)a.Ub(this.wa[b]),this.wa[b]=p;this.wa.length=0;a.Ub(this.dg);this.dg=p;if(this.aa){this.aa.rd&&(a.Ub(this.aa.rd),this.aa.rd=p);this.aa.me&&(a.Ub(this.aa.me),this.aa.me=p);b=0;for(c=this.aa.eh.length;b<c;b++)a.Ub(this.aa.eh[b]),this.aa.eh[b]=p;this.aa.eh.length=0;this.aa.Mo&&(a.Ub(this.aa.Mo), this.aa.Mo=p);b=0;for(c=this.aa.Ds.length;b<c;b++)a.Mp(this.aa.Ds[b]),this.aa.Ds[b]=p;this.aa.Ds.length=0;this.aa.ny=q}}},_delVia:function(a){if(this.ka){var b=this.ka.wj(),c=this.ka.kh();this.aa.Jb.splice(a,1);this.QB();this.hA(b,c)}},Ml:function(){if(this.k.ja.Ha&&this.k.ja.Ha.appendChild&&this.ka&&0<this.ka.Hx()){var a=this.ka.rf(0),b=K("div",{style:"font:12px "+F.fontFamily+";background:#fff"}),c=this.aa.Hi,d=c.length,e=[],f=this.vd===Ud,f=ee.GH(this.ka.kh().title,f?"\\u9a7e\\u8f66":"\\u6b65\\u884c", 0<d);if(0<d){e.push("<table style=\'width:100%;margin-left:4px;font:12px "+F.fontFamily+";border-collapse:collapse\' cellpadding=\'0\' cellspacing=\'0\' border=\'0\'>");for(var g=0;g<d;g++)e.push("<tr>"),0===g&&(1===d?e.push(\'<td style="padding:2px 5px;line-height:20px">\\u9014\\u7ecf\\u70b9</td>\'):e.push(\'<td valign="top" rowspan="\'+d+\'" style="padding:2px 5px;line-height:18px">\\u9014\\u7ecf\\u70b9</td>\')),e.push(\'<td style="padding:2px 5px;line-height:20px">\'+c[g].title+"</td>"),e.push(\'<td style="padding:2px 10px;line-height:20px;cursor:pointer;color:#0000ff" onclick=\\\'Instance("\'+ this.ba+\'")._delVia(\'+c[g].curNo+")\'>\\u5220\\u9664</td>"),e.push("</tr>");e.push("</table>")}for(var c=ee.HH(this.ka.wj().title,\'Instance("\'+this.ba+\'")._select(0)\',0),d=["<table class=\'navtrans-table\' style=\'width:100%;font:12px "+F.fontFamily+";border-collapse:collapse\' cellpadding=\'0\' cellspacing=\'0\' border=\'0\'>"],i=0,k=0,l=a.ht();k<l;k++)for(var m=a.mh(k),g=0,m=m.Ix();g<m;g++){var n="";this.lb===i+1&&(n=";background:#f0f0f0");d.push(\'<tr style="cursor:pointer\'+n+\'" onclick=\\\'Instance("\'+this.ba+ \'")._select(\'+(i+1)+")\'>");d.push("<td style=\'border-bottom:1px solid #E4E6E7;padding:10px;line-height:20px;\' >"+(this.ir(i).jh?this.ir(i).jh():this.ir(i).instructions)+"</td>");d.push("</tr>");i++}d.push("</table>");g=ee.HH(this.ka.kh().title,\'Instance("\'+this.ba+\'")._select(\'+(i+1)+")",1);a="<div class=\'navtrans-view expand\' style=\'position:relative;color:#7777cc;background:#e5ecf9;height:53px;overflow:hidden;text-align:right\' onclick=\'Instance(\\""+this.ba+"\\")._toggle()\'><span class=\'suggest-plan\'>\\u63a8\\u8350</span><div class=\'suggest-plan-des\'>"+ a.Ue().replace(/(\\d+(?:.\\d+)?)/,"$1 ")+"&nbsp;&nbsp;|&nbsp;&nbsp;"+a.bt().replace(/(\\d+)/,"$1 ")+"</div>";this.ka.moreResultsUrl&&(a+="<a style=\'color:#7777cc;position:absolute;top:5px;right:20px;\' href=\'"+this.ka.moreResultsUrl+"\' target=\'_blank\'>\\u5230\\u767e\\u5ea6\\u5730\\u56fe\\u67e5\\u770b&#187;</a>");b.innerHTML=f+(a+"&nbsp;<span class=\'navtrans-arrow\'></span></div>")+("<div class=\'navtrans-res\'>"+e.join("")+c+d.join("")+g+"</div>");this.k.ja.Ha.appendChild(b);this.Ra(X.Ku,b)}},BA:function(a,b){if(""=== b||!b)if(9===a||12===a||1===a||16===a)b=he.QP[a];return b},AS:function(a){var b="",c=a.poi;c&&(b=this.ZH(c.ps)||"",b=(this.$H(c.pw)||"")+b+"<b>"+c.pn+"</b>"+(c.pd<(13===a.pa||4===a.pa?1E3:50)?"":"\\u7ea6"+bi(c.pd)+"\\u540e")+(""===b?"":"\\uff0c"));return b},IS:function(a){var b=a.iw;return!a.ic?"":(this.VH(b)||"")+"<b>"+a.ic+"</b>"+(this.WH(b)||"")},ES:function(a,b){var c="\\u6cbf";if(0===a||!b&&1!==a&&16!==a&&9!==a&&12!==a)c="";return c},DS:function(a,b){var c="\\u8fdb\\u5165";if(!b&&(9===a||12===a))c= "\\u4e0a";else if(0===a||!b&&1!==a&&16!==a)c="";return c},HS:function(){if(this.Ga&&this.Ga.content&&this.Ga.content.taxi){var a=this.Ga.content.taxi,b={distance:a.dis,remark:a.remark};if(a.detail[0]){var c=a.detail[0];b.day={initialFare:parseFloat(c.startPrice),unitFare:parseFloat(c.kmPrice),totalFare:parseFloat(c.totalPrice)}}a.detail[1]&&(a=a.detail[1],b.night={initialFare:parseFloat(a.startPrice),unitFare:parseFloat(a.kmPrice),totalFare:parseFloat(a.totalPrice)});return b}return p}});ie.zz=" \\u76f4\\u884c \\u53f3\\u524d\\u65b9\\u8f6c\\u5f2f \\u53f3\\u8f6c \\u53f3\\u540e\\u65b9\\u8f6c\\u5f2f \\u8c03\\u5934 \\u5de6\\u540e\\u65b9\\u8f6c\\u5f2f \\u5de6\\u8f6c \\u5de6\\u524d\\u65b9\\u8f6c\\u5f2f \\u9760\\u5de6 \\u76f4\\u884c \\u9760\\u53f3 \\u6b63\\u5317\\u65b9\\u5411 \\u4e1c\\u5317\\u65b9\\u5411 \\u6b63\\u4e1c\\u65b9\\u5411 \\u4e1c\\u5357\\u65b9\\u5411 \\u6b63\\u5357\\u65b9\\u5411 \\u897f\\u5357\\u65b9\\u5411 \\u6b63\\u897f\\u65b9\\u5411 \\u897f\\u5317\\u65b9\\u5411".split(" "); ie.xz=["","\\u4ece\\u8d77\\u70b9\\u51fa\\u53d1","\\u5230\\u8fbe\\u76ee\\u7684\\u5730","\\u9014\\u7ecf\\u70b9","\\u884c\\u9a76"];ie.vq="s-1 s-1 s-2 s-3 s-4 s-5 s-6 s-7 s-8 s-9 s-1 s-10        ".split(" ");ie.qz=["\\u5728","\\u4ece","\\u4ece"];ie.rz=["","","\\u79bb\\u5f00"];ie.wz=["\\u8fc7","\\u5728"];ie.vz=["\\u5de6\\u4fa7\\u7684","\\u53f3\\u4fa7\\u7684",""];ie.lz=["","\\u671d"]; x.extend(ie.prototype,{jv:function(a){return new Xh(a)},tv:function(a){return ie.zz[a]},bI:function(a){return\'<span class="navtrans-navlist-icon \'+(ie.vq[a]?ie.vq[a]:"")+\'"></span>\'},AA:function(a){return ie.xz[a]},VH:function(a){return ie.qz[a]},WH:function(a){return ie.rz[a]},$H:function(a){return ie.wz[a]},ZH:function(a){return ie.vz[a]},QH:function(a){return ie.lz[a]}});je.zz=" \\u76f4\\u8d70 \\u5411\\u53f3\\u524d\\u65b9\\u8f6c \\u53f3\\u8f6c \\u5411\\u53f3\\u540e\\u65b9\\u8f6c \\u5411\\u540e\\u8f6c \\u5411\\u5de6\\u540e\\u65b9\\u8f6c \\u5de6\\u8f6c \\u5411\\u5de6\\u524d\\u65b9\\u8f6c \\u5de6\\u8f6c\\u7a7f\\u8fc7\\u9a6c\\u8def\\u5e76\\u7ee7\\u7eed\\u5411\\u524d \\u53f3\\u8f6c\\u7a7f\\u8fc7\\u9a6c\\u8def\\u5e76\\u7ee7\\u7eed\\u5411\\u524d \\u5de6\\u8f6c\\u7a7f\\u8fc7\\u9a6c\\u8def\\u5e76\\u5f80\\u56de\\u8d70 \\u53f3\\u8f6c\\u7a7f\\u8fc7\\u9a6c\\u8def\\u5e76\\u5f80\\u56de\\u8d70 \\u6b63\\u5317\\u65b9\\u5411 \\u4e1c\\u5317\\u65b9\\u5411 \\u6b63\\u4e1c\\u65b9\\u5411 \\u4e1c\\u5357\\u65b9\\u5411 \\u6b63\\u5357\\u65b9\\u5411 \\u897f\\u5357\\u65b9\\u5411 \\u6b63\\u897f\\u65b9\\u5411 \\u897f\\u5317\\u65b9\\u5411    ".split(" "); je.vq="s-1 s-1 s-2 s-3 s-4 s-5 s-6 s-7 s-8 s-7 s-3 s-7 s-3            ".split(" ");je.xz=["","\\u4ece\\u8d77\\u70b9\\u51fa\\u53d1","\\u5230\\u8fbe\\u76ee\\u7684\\u5730","\\u9014\\u7ecf\\u70b9","\\u8d70"];je.qz=["\\u5728","\\u4ece","\\u4ece"];je.rz=["","","\\u79bb\\u5f00"];je.wz=["\\u8fc7","\\u5728"];je.vz=["\\u5de6\\u4fa7\\u7684","\\u53f3\\u4fa7\\u7684",""];je.lz=["","\\u671d"]; x.extend(je.prototype,{jv:function(a){delete a.url;return new Yh(a)},tv:function(a){return je.zz[a]},bI:function(a){return\'<span class="navtrans-navlist-icon \'+(je.vq[a]?je.vq[a]:"")+\'"></span>\'},AA:function(a){return je.xz[a]},VH:function(a){return je.qz[a]},WH:function(a){return je.rz[a]},$H:function(a){return je.wz[a]},ZH:function(a){return je.vz[a]},QH:function(a){return je.lz[a]}});x.extend(oe.prototype,{Sd:function(a,b,c){this.aM("web",this.XL(a,b,c))},aO:function(a,b,c){this.aM("web",this.XL(a,b,c))},mO:function(a,b){var c=this.wh,d="";a&&a.JM&&a.name?(d=a.JM,d="latlng:"+d.lat+","+d.lng,d+="|name:"+a.name):d=(d=a.JM)?d.lat+","+d.lng:a.name?a.name:"";c[b]=d},XL:function(a,b,c){this.mO(a,"origin");this.mO(b,"destination");var c=this.wh=x.object.extend(this.wh,c),a=[],d="";if("undefined"===typeof c.origin||""===c.origin)c.origin="";var b={destination:q,mode:q},e;for(e in c)d= e+"="+c[e],a.push(d),"undefined"!==typeof b[e]&&(b[e]=o);this.mode=c.mode;b.mode===q&&(this.mode="driving",a.push("mode=driving"),b.mode=o);e=o;for(var f in b)e=e&&b[f];return e?a.join("&"):q},aM:function(a,b,c){b&&(b=Vh[a]+b+"&src=baidu|jsapi",Qa(7E3,{mode:this.mode}),"web"===a&&(b+="&output=html"),location.href=b,c&&c())}}); ');