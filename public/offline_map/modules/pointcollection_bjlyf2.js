/**/_jsload2&&_jsload2('pointcollection', 'x.extend(id.prototype,{ra:function(a){var b=this;b.map=this.D=a;b.xc=document.createElement("canvas");b.xc.style.cssText="position: absolute; left: 0; top: 0;";b.V=b.xc;a=b.map.tb();b.xc.width=a.width;b.xc.height=a.height;b.xc.id="myCanvasElement";b.map.Rf().Ht.appendChild(b.xc);b.Ry=new Ag;b.mi();b.map.addEventListener("click",function(a){a=Bg(b.Ry,a.offsetX,a.offsetY);a!==p&&b.dispatchEvent("click",{point:a.point})});b.Uk=p;b.map.addEventListener("mousemove",function(a){for(var d=b.map.Jx(),e=d.length, f=p,g=0;g<e&&!(d[g]instanceof z.PointCollection&&(f=Bg(d[g].Ry,a.offsetX,a.offsetY),f!==p));g++);f===p?(b.Uk!==p&&(b.dispatchEvent("mouseout",{point:b.Uk.point}),b.Uk=p),b.xc.style.cursor=""):(b.Uk===p?(b.dispatchEvent("mouseover",{point:f.point}),b.Uk=f):b.Uk!==f&&(b.dispatchEvent("mouseout",{point:b.Uk.point}),b.dispatchEvent("mouseover",{point:f.point}),b.Uk=f),b.xc.style.cursor="pointer")});return b.xc},mi:function(){this.Ry.data.NF=[];var a=this.map.tb();this.xc.width=a.width;this.xc.height= a.height;this.xc.style.left=this.map.Ae.style.left;this.xc.style.top=this.map.Ae.style.top;if(this.ea.ia&&this.ea.ia.length){this.xc.getContext("2d").clearRect(0,0,this.xc.width,this.xc.height);-1!==document.location.href.indexOf(".local")&&(console&&console.time)&&console.time("\\u904d\\u5386\\u7ed8\\u5236\\u9ebb\\u70b9");this.xc.getContext("2d").beginPath();for(var b=0,c;c=this.ea.ia[b];b++){var d=this.map.Cc(c);if(!(0>d.x||0>d.y||d.x>a.width||d.y>a.height)){var e;switch(this.z.shape){case 1:e=new Cg; break;case 2:e=new Dg;break;case 4:e=new Eg;break;case 5:e=new Fg;break;case fd:e=new Gg;break;default:e=new Gg}switch(this.z.size){case 1:("circle"===e.type||"star"===e.type)&&e.wf(1);if("rectangle"===e.type||"rhombus"===e.type)e.Fh(2),e.Dh(2);break;case 2:("circle"===e.type||"star"===e.type)&&e.wf(2);if("rectangle"===e.type||"rhombus"===e.type)e.Fh(4),e.Dh(4);break;case 3:("circle"===e.type||"star"===e.type)&&e.wf(4);if("rectangle"===e.type||"rhombus"===e.type)e.Fh(8),e.Dh(8);break;case gd:("circle"=== e.type||"star"===e.type)&&e.wf(5);if("rectangle"===e.type||"rhombus"===e.type)e.Fh(10),e.Dh(10);break;case 5:("circle"===e.type||"star"===e.type)&&e.wf(8);if("rectangle"===e.type||"rhombus"===e.type)e.Fh(16),e.Dh(16);break;case 6:("circle"===e.type||"star"===e.type)&&e.wf(10);if("rectangle"===e.type||"rhombus"===e.type)e.Fh(20),e.Dh(20);break;case 7:("circle"===e.type||"star"===e.type)&&e.wf(15);if("rectangle"===e.type||"rhombus"===e.type)e.Fh(30),e.Dh(30);break;default:if(("circle"===e.type||"star"=== e.type)&&e.wf(5),"rectangle"===e.type||"rhombus"===e.type)e.Fh(10),e.Dh(10)}this.z.color&&("circle"===e.type||"star"===e.type||"rectangle"===e.type||"rhombus"===e.type)&&e.Qk(this.z.color);e.Uo(this.xc.getContext("2d"),d.x,d.y);e.point=c;this.Ry.data.NF.push(e)}}this.xc.getContext("2d").fillStyle=this.z.color;this.xc.getContext("2d").fill();-1!==document.location.href.indexOf(".local")&&(console&&console.timeEnd)&&console.timeEnd("\\u904d\\u5386\\u7ed8\\u5236\\u9ebb\\u70b9")}},t_:function(a){this.ea.ia= a;this.mi()},Ci:function(a){a.color&&(this.z.color=a.color);a.size&&(this.z.size=a.size);a.shape&&(this.z.shape=a.shape);this.mi()},clear:function(){this.ea.ia=[];this.mi()},remove:function(){this.clear();this.xc&&this.xc.parentNode&&this.xc.parentNode.removeChild(this.xc);this.dispatchEvent(new M("onremove"))}});id.prototype.initialize=id.prototype.ra;id.prototype.draw=id.prototype.mi;id.prototype.setPoints=id.prototype.t_;id.prototype.setStyles=id.prototype.Ci;id.prototype.clear=id.prototype.clear; id.prototype.remove=id.prototype.remove;function Ag(){this.data={NF:[]}}function Bg(a,b,c){for(var d=0,e;e=a.data.NF[d];d++)if(e.Ak(),b>e.position.x-e.pp()/2&&b<e.position.x+e.pp()/2&&c>e.position.y-e.Ak()/2&&c<e.position.y+e.Ak()/2)return e;return p}function Dg(){this.type="waterdrop";this.position={x:0,y:0}}var Hg=document.createElement("img"),Ig=q;Hg.onload=function(){Ig=o};Hg.src=z.ma+"images/point-collection/red-marker-10x13.png";var Jg=document.createElement("img");Jg.onload=t(); Jg.src=z.ma+"images/point-collection/blue-marke-15x16.png";Dg.prototype.Uo=function(a,b,c){var d=this;Ig===q?setTimeout(function(){d.Uo(a,b,c)},10):(d.Y1=a,d.position.x=b,d.position.y=c,a.save(),a.translate(b-Hg.width/2,c-Hg.height/2),a.drawImage(Hg,0,0,Hg.width,Hg.height,0,0,Hg.width,Hg.height),a.restore())};Dg.prototype.ha=v("position");Dg.prototype.pp=function(){return Hg.width};Dg.prototype.Ak=function(){return Hg.height}; function Gg(a){this.type="circle";a=a||{};this.B={xa:a.radius||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}fa=Gg.prototype;fa.Uo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.translate(b,c);a.beginPath();a.fillStyle=this.B.color;a.arc(0,0,this.B.xa,0,2*Math.PI,q);a.fill();a.restore()};fa.wf=function(a){this.B.xa=a};fa.OL=function(){return this.B.xa};fa.Qk=function(a){this.B.color=a};fa.ha=v("position");fa.pp=function(){return 2*this.B.xa};fa.Ak=function(){return 2*this.B.xa}; function Cg(a){this.type="star";a=a||{};this.B={xa:a.radius||10,iF:a.pointsNumber||5,YW:a.fraction||0.4,color:a.color||"#fa937e"};this.position={x:0,y:0}}fa=Cg.prototype;fa.Uo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.fillStyle=this.B.color;a.beginPath();a.translate(b,c);a.moveTo(0,0-this.B.xa);for(b=0;b<this.B.iF;b++)a.rotate(Math.PI/this.B.iF),a.lineTo(0,0-this.B.xa*this.B.YW),a.rotate(Math.PI/this.B.iF),a.lineTo(0,0-this.B.xa);a.fill();a.restore()}; fa.wf=function(a){this.B.xa=a};fa.Qk=function(a){this.B.color=a};fa.ha=v("position");fa.pp=function(){return 2*this.B.xa};fa.Ak=function(){return 2*this.B.xa};function Eg(a){this.type="rectangle";a=a||{};this.B={width:a.width||10,height:a.height||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}fa=Eg.prototype;fa.Uo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.translate(b-this.B.width/2,c-this.B.height/2);a.fillStyle=this.B.color;a.fillRect(0,0,this.B.width,this.B.height);a.restore()}; fa.Fh=function(a){this.B.width=a};fa.pp=function(){return this.B.width};fa.Dh=function(a){this.B.height=a};fa.Ak=function(){return this.B.height};fa.Qk=function(a){this.B.color=a};fa.ha=v("position");function Fg(a){this.type="rhombus";a=a||{};this.B={width:a.width||10,height:a.height||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}fa=Fg.prototype; fa.Uo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.fillStyle=this.B.color;a.translate(b-this.B.width/2,c-this.B.height/2);a.beginPath();a.moveTo(0+0.5*this.B.width,0);a.lineTo(0,0+0.5*this.B.height);a.lineTo(0+0.5*this.B.width,0+this.B.height);a.lineTo(0+this.B.width,0+0.5*this.B.height);a.lineTo(0+0.5*this.B.width,0);a.closePath();a.fill();a.restore()};fa.Fh=function(a){this.B.width=a};fa.pp=function(){return this.B.width};fa.Dh=function(a){this.B.height=a};fa.Ak=function(){return this.B.height}; fa.Qk=function(a){this.B.color=a};fa.ha=v("position"); ');